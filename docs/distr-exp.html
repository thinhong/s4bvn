<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; Phân phối mũ – Statistics for babies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./distr-pl.html" rel="next">
<link href="./distr-lnorm.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-832c273f0af7a47d06e59912ec7b3523.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-N2T5TFNFY7"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-N2T5TFNFY7', { 'anonymize_ip': true});
</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./distr-c.html">Phân phối liên tục</a></li><li class="breadcrumb-item"><a href="./distr-exp.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Phân phối mũ</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistics for babies</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prob.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Xác suất</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./distr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Phân phối xác suất</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./distr-d.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Phân phối rời rạc</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./distr-bin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Phân phối nhị thức</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./distr-pois.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Phân phối Poisson</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./distr-c.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Phân phối liên tục</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./distr-norm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Phân phối bình thường</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./distr-lnorm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Phân phối log-normal</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./distr-exp.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Phân phối mũ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./distr-pl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Phân phối quy tắc lũy thừa</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lik.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Hàm hợp lý</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bayes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Bayesian</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./thanks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lời cảm ơn</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tài liệu tham khảo</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#định-nghĩa" id="toc-định-nghĩa" class="nav-link active" data-scroll-target="#định-nghĩa"><span class="header-section-number">7.1</span> Định nghĩa</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./distr-c.html">Phân phối liên tục</a></li><li class="breadcrumb-item"><a href="./distr-exp.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Phân phối mũ</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Phân phối mũ</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="định-nghĩa" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="định-nghĩa"><span class="header-section-number">7.1</span> Định nghĩa</h2>
<p>Phân phối mũ (exponential distribution) dùng để mô hình <strong>thời gian chờ</strong> từ khi một biến cố xảy ra cho đến biến cố tiếp theo trong một quá trình Poisson.</p>
<p><span class="math display">\[f(x) = \underbrace{\lambda}_{\text{Cường độ ban đầu}} \cdot \underbrace{e^{-\lambda x}}_{\text{Quy luật suy giảm}}\]</span></p>
<p>Vì vậy phân phối mũ có liên hệ chặt chẽ với phân phối Poisson.</p>
<ul>
<li>Poisson: đếm <strong>số lượng</strong> biến cố ngẫu nhiên xảy ra trong 1 khoảng thời gian cố định</li>
<li>Mũ: khoảng thời gian giữa 2 biến cố xảy ra</li>
</ul>
<p>Trong mô hình SIR, khi chúng ta định nghĩa <span class="math inline">\(I\)</span> hồi phục với tần suất trung bình là <span class="math inline">\(\gamma\)</span>, thì sự di chuyển từ <span class="math inline">\(I\)</span> sang <span class="math inline">\(R\)</span> là 1 quá trình Poisson. Thời gian một người từ lúc bước vào khoang <span class="math inline">\(I\)</span> cho tới khi chuyển sang khoang <span class="math inline">\(R\)</span> sẽ tuân theo phân phối mũ.</p>
<p><img src="img/sir.svg" class="img-fluid"></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="22" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 21;"><span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>viewof sir_sim <span class="op">=</span> (() <span class="kw">=&gt;</span> {</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 1. STYLE</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> wrapper <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  wrapper<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="vs">    display:flex;flex-direction:column;align-items:center;</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="vs">    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="vs">    width:100%;max-width:960px;margin:0 auto;</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> style <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"style"</span>)<span class="op">;</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  style<span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider{position:relative;height:8px;border-radius:4px;background:#e2e8f0;}</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider-fill{position:absolute;left:0;top:0;height:100%;border-radius:4px;transition:width 0.04s;}</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider input[type=range]{</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="vs">      position:absolute;top:0;left:0;width:100%;height:100%;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="vs">      -webkit-appearance:none;appearance:none;background:transparent;</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="vs">      cursor:pointer;margin:0;padding:0;</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="vs">    }</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider input[type=range]::-webkit-slider-thumb{</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="vs">      -webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="vs">      border:3px solid #fff;box-shadow:0 1px 5px rgba(0,0,0,0.28);</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="vs">      cursor:pointer;margin-top:-6px;background:#475569;</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="vs">    }</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider input[type=range]::-moz-range-thumb{</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="vs">      width:14px;height:14px;border-radius:50%;border:3px solid #fff;</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="vs">      box-shadow:0 1px 5px rgba(0,0,0,0.28);cursor:pointer;background:#475569;</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="vs">    }</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider input[type=range]::-webkit-slider-runnable-track{height:8px;background:transparent;}</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider input[type=range]::-moz-range-track{height:8px;background:transparent;}</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider-blue input[type=range]::-webkit-slider-thumb{background:#3b82f6;}</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider-blue input[type=range]::-moz-range-thumb{background:#3b82f6;}</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider-red input[type=range]::-webkit-slider-thumb{background:#dc2626;}</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider-red input[type=range]::-moz-range-thumb{background:#dc2626;}</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider-amber input[type=range]::-webkit-slider-thumb{background:#d97706;}</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider-amber input[type=range]::-moz-range-thumb{background:#d97706;}</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider-green input[type=range]::-webkit-slider-thumb{background:#16a34a;}</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-slider-green input[type=range]::-moz-range-thumb{background:#16a34a;}</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-btn{</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="vs">      padding:8px 0;border-radius:8px;border:1px solid #d1d5db;</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="vs">      background:#fff;color:#374151;font-size:13px;font-weight:600;</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="vs">      cursor:pointer;transition:background 0.1s;font-family:inherit;text-align:center;flex:1;</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="vs">    }</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-btn:hover{background:#f3f4f6;}</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-btn-step{background:#3b82f6;color:#fff;border-color:#2563eb;}</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-btn-step:hover{background:#2563eb;color:#fff;}</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-btn-auto{background:#16a34a;color:#fff;border-color:#15803d;}</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-btn-auto:hover{background:#15803d;color:#fff;}</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-btn-reset{background:#fef2f2;color:#dc2626;border-color:#fecaca;}</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="vs">    .sir-btn-reset:hover{background:#fee2e2;color:#dc2626;}</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>  wrapper<span class="op">.</span><span class="fu">appendChild</span>(style)<span class="op">;</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 2. SLIDERS</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">createSlider</span>(label<span class="op">,</span>min<span class="op">,</span>max<span class="op">,</span>step<span class="op">,</span>val<span class="op">,</span>color<span class="op">,</span>cls){</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> row<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>    row<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"display:flex;flex-direction:column;flex:1;min-width:140px;"</span><span class="op">;</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> head<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    head<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"display:flex;justify-content:space-between;align-items:baseline;margin-bottom:5px;"</span><span class="op">;</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> lbl<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"span"</span>)<span class="op">;</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>    lbl<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"font-size:11px;font-weight:600;color:#64748b;letter-spacing:0.3px;text-transform:uppercase;"</span><span class="op">;</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>    lbl<span class="op">.</span><span class="at">textContent</span><span class="op">=</span>label<span class="op">;</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> valSpan<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"span"</span>)<span class="op">;</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    valSpan<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="vs">`font-size:17px;font-weight:800;color:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">;font-variant-numeric:tabular-nums;font-family:"SF Mono",SFMono-Regular,Menlo,Consolas,monospace;`</span><span class="op">;</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    valSpan<span class="op">.</span><span class="at">textContent</span><span class="op">=</span>step<span class="op">&lt;</span><span class="dv">1</span><span class="op">?</span><span class="bu">Number</span>(val)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">:</span>val<span class="op">;</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>    head<span class="op">.</span><span class="fu">appendChild</span>(lbl)<span class="op">;</span>head<span class="op">.</span><span class="fu">appendChild</span>(valSpan)<span class="op">;</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> track<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>    track<span class="op">.</span><span class="at">className</span><span class="op">=</span><span class="st">"sir-slider sir-slider-"</span><span class="op">+</span>cls<span class="op">;</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> fill<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>    fill<span class="op">.</span><span class="at">className</span><span class="op">=</span><span class="st">"sir-slider-fill"</span><span class="op">;</span>fill<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">background</span><span class="op">=</span>color<span class="op">;</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>    fill<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">width</span><span class="op">=</span>((val<span class="op">-</span>min)<span class="op">/</span>(max<span class="op">-</span>min))<span class="op">*</span><span class="dv">100</span><span class="op">+</span><span class="st">"%"</span><span class="op">;</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    track<span class="op">.</span><span class="fu">appendChild</span>(fill)<span class="op">;</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> input<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"input"</span>)<span class="op">;</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>    input<span class="op">.</span><span class="at">type</span><span class="op">=</span><span class="st">"range"</span><span class="op">;</span>input<span class="op">.</span><span class="at">min</span><span class="op">=</span>min<span class="op">;</span>input<span class="op">.</span><span class="at">max</span><span class="op">=</span>max<span class="op">;</span>input<span class="op">.</span><span class="at">step</span><span class="op">=</span>step<span class="op">;</span>input<span class="op">.</span><span class="at">value</span><span class="op">=</span>val<span class="op">;</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>    track<span class="op">.</span><span class="fu">appendChild</span>(input)<span class="op">;</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>    row<span class="op">.</span><span class="fu">appendChild</span>(head)<span class="op">;</span>row<span class="op">.</span><span class="fu">appendChild</span>(track)<span class="op">;</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>{<span class="dt">el</span><span class="op">:</span>row<span class="op">,</span>input<span class="op">,</span>valSpan<span class="op">,</span>fill<span class="op">,</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>      <span class="fu">val</span>(){<span class="cf">return</span><span class="op">+</span>input<span class="op">.</span><span class="at">value</span>}<span class="op">,</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sync</span>(){<span class="kw">const</span> v<span class="op">=+</span>input<span class="op">.</span><span class="at">value</span><span class="op">;</span>valSpan<span class="op">.</span><span class="at">textContent</span><span class="op">=</span>step<span class="op">&lt;</span><span class="dv">1</span><span class="op">?</span>v<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="op">:</span><span class="bu">String</span>(v)<span class="op">;</span>fill<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">width</span><span class="op">=</span>((v<span class="op">-</span>min)<span class="op">/</span>(max<span class="op">-</span>min))<span class="op">*</span><span class="dv">100</span><span class="op">+</span><span class="st">"%"</span><span class="op">;</span>}</span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> SL<span class="op">=</span>{}<span class="op">;</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>  SL<span class="op">.</span><span class="at">s0</span><span class="op">=</span><span class="fu">createSlider</span>(<span class="st">"Initial Susceptible"</span><span class="op">,</span><span class="dv">50</span><span class="op">,</span><span class="dv">300</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">200</span><span class="op">,</span><span class="st">"#3b82f6"</span><span class="op">,</span><span class="st">"blue"</span>)<span class="op">;</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>  SL<span class="op">.</span><span class="at">i0</span><span class="op">=</span><span class="fu">createSlider</span>(<span class="st">"Initial Infected"</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">,</span><span class="st">"#dc2626"</span><span class="op">,</span><span class="st">"red"</span>)<span class="op">;</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>  SL<span class="op">.</span><span class="at">beta</span><span class="op">=</span><span class="fu">createSlider</span>(<span class="st">"</span><span class="sc">\u03B2</span><span class="st"> (infect per day)"</span><span class="op">,</span><span class="fl">0.5</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="fl">0.5</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="st">"#d97706"</span><span class="op">,</span><span class="st">"amber"</span>)<span class="op">;</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>  SL<span class="op">.</span><span class="at">gamma</span><span class="op">=</span><span class="fu">createSlider</span>(<span class="st">"</span><span class="sc">\u03B3</span><span class="st"> (recovery prob/day)"</span><span class="op">,</span><span class="fl">0.05</span><span class="op">,</span><span class="fl">0.80</span><span class="op">,</span><span class="fl">0.05</span><span class="op">,</span><span class="fl">0.20</span><span class="op">,</span><span class="st">"#16a34a"</span><span class="op">,</span><span class="st">"green"</span>)<span class="op">;</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> r1<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>  r1<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"display:flex;gap:24px;width:100%;margin-bottom:10px;"</span><span class="op">;</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>  r1<span class="op">.</span><span class="fu">appendChild</span>(SL<span class="op">.</span><span class="at">s0</span><span class="op">.</span><span class="at">el</span>)<span class="op">;</span>r1<span class="op">.</span><span class="fu">appendChild</span>(SL<span class="op">.</span><span class="at">i0</span><span class="op">.</span><span class="at">el</span>)<span class="op">;</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>  wrapper<span class="op">.</span><span class="fu">appendChild</span>(r1)<span class="op">;</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> r2<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>  r2<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"display:flex;gap:24px;width:100%;margin-bottom:12px;"</span><span class="op">;</span></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>  r2<span class="op">.</span><span class="fu">appendChild</span>(SL<span class="op">.</span><span class="at">beta</span><span class="op">.</span><span class="at">el</span>)<span class="op">;</span>r2<span class="op">.</span><span class="fu">appendChild</span>(SL<span class="op">.</span><span class="at">gamma</span><span class="op">.</span><span class="at">el</span>)<span class="op">;</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>  wrapper<span class="op">.</span><span class="fu">appendChild</span>(r2)<span class="op">;</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> r3<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>  r3<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"display:flex;gap:10px;width:100%;margin-bottom:14px;padding-bottom:14px;border-bottom:1px solid #e2e8f0;"</span><span class="op">;</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> btnStep<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"button"</span>)<span class="op">;</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>  btnStep<span class="op">.</span><span class="at">className</span><span class="op">=</span><span class="st">"sir-btn sir-btn-step"</span><span class="op">;</span>btnStep<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"▶  Step"</span><span class="op">;</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> btnAuto<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"button"</span>)<span class="op">;</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>  btnAuto<span class="op">.</span><span class="at">className</span><span class="op">=</span><span class="st">"sir-btn sir-btn-auto"</span><span class="op">;</span>btnAuto<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"⏩  Auto"</span><span class="op">;</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> btnReset<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"button"</span>)<span class="op">;</span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>  btnReset<span class="op">.</span><span class="at">className</span><span class="op">=</span><span class="st">"sir-btn sir-btn-reset"</span><span class="op">;</span>btnReset<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"↺  Reset"</span><span class="op">;</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>  r3<span class="op">.</span><span class="fu">appendChild</span>(btnStep)<span class="op">;</span>r3<span class="op">.</span><span class="fu">appendChild</span>(btnAuto)<span class="op">;</span>r3<span class="op">.</span><span class="fu">appendChild</span>(btnReset)<span class="op">;</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>  wrapper<span class="op">.</span><span class="fu">appendChild</span>(r3)<span class="op">;</span></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 3. COMPARTMENT BOXES</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> boxRow<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>  boxRow<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"display:flex;gap:10px;width:100%;margin-bottom:14px;"</span><span class="op">;</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">makeBox</span>(label<span class="op">,</span>borderColor<span class="op">,</span>bgColor<span class="op">,</span>countColor){</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> box<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>    box<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="vs">`flex:1;border-radius:10px;border:2px solid </span><span class="sc">${</span>borderColor<span class="sc">}</span><span class="vs">;background:</span><span class="sc">${</span>bgColor<span class="sc">}</span><span class="vs">;padding:10px;min-height:120px;overflow:hidden;`</span><span class="op">;</span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> hdr<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>    hdr<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px;"</span><span class="op">;</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> lbl<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"span"</span>)<span class="op">;</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>    lbl<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="vs">`font-size:12px;font-weight:700;color:</span><span class="sc">${</span>countColor<span class="sc">}</span><span class="vs">;text-transform:uppercase;letter-spacing:0.5px;`</span><span class="op">;</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>    lbl<span class="op">.</span><span class="at">textContent</span><span class="op">=</span>label<span class="op">;</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cnt<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"span"</span>)<span class="op">;</span></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>    cnt<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="vs">`font-size:20px;font-weight:800;color:</span><span class="sc">${</span>countColor<span class="sc">}</span><span class="vs">;font-family:"SF Mono",monospace;`</span><span class="op">;</span></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a>    cnt<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"0"</span><span class="op">;</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>    hdr<span class="op">.</span><span class="fu">appendChild</span>(lbl)<span class="op">;</span>hdr<span class="op">.</span><span class="fu">appendChild</span>(cnt)<span class="op">;</span>box<span class="op">.</span><span class="fu">appendChild</span>(hdr)<span class="op">;</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> grid<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>    grid<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"display:flex;flex-wrap:wrap;gap:3px;align-content:flex-start;"</span><span class="op">;</span></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>    box<span class="op">.</span><span class="fu">appendChild</span>(grid)<span class="op">;</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>{box<span class="op">,</span>cnt<span class="op">,</span>grid}<span class="op">;</span></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> boxS<span class="op">=</span><span class="fu">makeBox</span>(<span class="st">"Susceptible"</span><span class="op">,</span><span class="st">"#bfdbfe"</span><span class="op">,</span><span class="st">"#eff6ff"</span><span class="op">,</span><span class="st">"#1d4ed8"</span>)<span class="op">;</span></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> boxI<span class="op">=</span><span class="fu">makeBox</span>(<span class="st">"Infected"</span><span class="op">,</span><span class="st">"#fecaca"</span><span class="op">,</span><span class="st">"#fef2f2"</span><span class="op">,</span><span class="st">"#dc2626"</span>)<span class="op">;</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> boxR<span class="op">=</span><span class="fu">makeBox</span>(<span class="st">"Recovered"</span><span class="op">,</span><span class="st">"#bbf7d0"</span><span class="op">,</span><span class="st">"#f0fdf4"</span><span class="op">,</span><span class="st">"#16a34a"</span>)<span class="op">;</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>  boxRow<span class="op">.</span><span class="fu">appendChild</span>(boxS<span class="op">.</span><span class="at">box</span>)<span class="op">;</span>boxRow<span class="op">.</span><span class="fu">appendChild</span>(boxI<span class="op">.</span><span class="at">box</span>)<span class="op">;</span>boxRow<span class="op">.</span><span class="fu">appendChild</span>(boxR<span class="op">.</span><span class="at">box</span>)<span class="op">;</span></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a>  wrapper<span class="op">.</span><span class="fu">appendChild</span>(boxRow)<span class="op">;</span></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dayLabel<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>  dayLabel<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="vs">`width:100%;text-align:center;font-size:14px;font-weight:700;color:#334155;margin-bottom:10px;font-family:"SF Mono",monospace;`</span><span class="op">;</span></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>  wrapper<span class="op">.</span><span class="fu">appendChild</span>(dayLabel)<span class="op">;</span></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 4. HISTOGRAM SVG</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> NS<span class="op">=</span><span class="st">"http://www.w3.org/2000/svg"</span><span class="op">;</span></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> CW<span class="op">=</span><span class="dv">760</span><span class="op">,</span>CH<span class="op">=</span><span class="dv">300</span><span class="op">;</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> cmg<span class="op">=</span>{<span class="dt">t</span><span class="op">:</span><span class="dv">20</span><span class="op">,</span><span class="dt">r</span><span class="op">:</span><span class="dv">20</span><span class="op">,</span><span class="dt">b</span><span class="op">:</span><span class="dv">48</span><span class="op">,</span><span class="dt">l</span><span class="op">:</span><span class="dv">56</span>}<span class="op">;</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> ccw<span class="op">=</span>CW<span class="op">-</span>cmg<span class="op">.</span><span class="at">l</span><span class="op">-</span>cmg<span class="op">.</span><span class="at">r</span><span class="op">,</span>cch<span class="op">=</span>CH<span class="op">-</span>cmg<span class="op">.</span><span class="at">t</span><span class="op">-</span>cmg<span class="op">.</span><span class="at">b</span><span class="op">;</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElementNS</span>(NS<span class="op">,</span><span class="st">"svg"</span>)<span class="op">;</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"viewBox"</span><span class="op">,</span><span class="vs">`0 0 </span><span class="sc">${</span>CW<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>CH<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="vs">`width:100%;max-width:</span><span class="sc">${</span>CW<span class="sc">}</span><span class="vs">px;background:#fafbfc;border-radius:10px;border:1px solid #e2e8f0;`</span><span class="op">;</span></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">el</span>(tag<span class="op">,</span>a){<span class="kw">const</span> e<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElementNS</span>(NS<span class="op">,</span>tag)<span class="op">;</span><span class="cf">if</span>(a)<span class="cf">for</span>(<span class="kw">const</span>[k<span class="op">,</span>v]<span class="kw">of</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">entries</span>(a))e<span class="op">.</span><span class="fu">setAttribute</span>(k<span class="op">,</span>v)<span class="op">;</span><span class="cf">return</span> e<span class="op">;</span>}</span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> gridLines<span class="op">=</span>[]<span class="op">;</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;=</span><span class="dv">4</span><span class="op">;</span>i<span class="op">++</span>){<span class="kw">const</span> l<span class="op">=</span><span class="fu">el</span>(<span class="st">"line"</span><span class="op">,</span>{<span class="dt">stroke</span><span class="op">:</span><span class="st">"#e2e8f0"</span><span class="op">,</span><span class="st">"stroke-width"</span><span class="op">:</span><span class="st">"0.7"</span>})<span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(l)<span class="op">;</span>gridLines<span class="op">.</span><span class="fu">push</span>(l)<span class="op">;</span>}</span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yLabelsH<span class="op">=</span>[]<span class="op">;</span></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;=</span><span class="dv">4</span><span class="op">;</span>i<span class="op">++</span>){<span class="kw">const</span> t<span class="op">=</span><span class="fu">el</span>(<span class="st">"text"</span><span class="op">,</span>{<span class="st">"text-anchor"</span><span class="op">:</span><span class="st">"end"</span><span class="op">,</span><span class="dt">fill</span><span class="op">:</span><span class="st">"#94a3b8"</span><span class="op">,</span><span class="st">"font-size"</span><span class="op">:</span><span class="st">"10"</span><span class="op">,</span><span class="st">"font-family"</span><span class="op">:</span><span class="st">"'SF Mono',monospace"</span>})<span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(t)<span class="op">;</span>yLabelsH<span class="op">.</span><span class="fu">push</span>(t)<span class="op">;</span>}</span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> BPOOL<span class="op">=</span><span class="dv">60</span><span class="op">;</span></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> hBars<span class="op">=</span>[]<span class="op">;</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>BPOOL<span class="op">;</span>i<span class="op">++</span>){</span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> r<span class="op">=</span><span class="fu">el</span>(<span class="st">"rect"</span><span class="op">,</span>{<span class="dt">rx</span><span class="op">:</span><span class="st">"2"</span><span class="op">,</span><span class="dt">fill</span><span class="op">:</span><span class="st">"#16a34a"</span><span class="op">,</span><span class="dt">stroke</span><span class="op">:</span><span class="st">"#15803d"</span><span class="op">,</span><span class="st">"stroke-width"</span><span class="op">:</span><span class="st">"0.5"</span><span class="op">,</span><span class="dt">opacity</span><span class="op">:</span><span class="st">"0.7"</span>})<span class="op">;</span></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a>    r<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">"none"</span><span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(r)<span class="op">;</span>hBars<span class="op">.</span><span class="fu">push</span>(r)<span class="op">;</span></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> expPath<span class="op">=</span><span class="fu">el</span>(<span class="st">"path"</span><span class="op">,</span>{<span class="dt">fill</span><span class="op">:</span><span class="st">"none"</span><span class="op">,</span><span class="dt">stroke</span><span class="op">:</span><span class="st">"#dc2626"</span><span class="op">,</span><span class="st">"stroke-width"</span><span class="op">:</span><span class="st">"2.5"</span><span class="op">,</span><span class="dt">opacity</span><span class="op">:</span><span class="st">"0.85"</span>})<span class="op">;</span></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">appendChild</span>(expPath)<span class="op">;</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xAx<span class="op">=</span><span class="fu">el</span>(<span class="st">"line"</span><span class="op">,</span>{<span class="dt">stroke</span><span class="op">:</span><span class="st">"#94a3b8"</span>})<span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(xAx)<span class="op">;</span></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xTickPool<span class="op">=</span>[]<span class="op">;</span></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span><span class="dv">20</span><span class="op">;</span>i<span class="op">++</span>){</span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> ln<span class="op">=</span><span class="fu">el</span>(<span class="st">"line"</span><span class="op">,</span>{<span class="dt">stroke</span><span class="op">:</span><span class="st">"#94a3b8"</span><span class="op">,</span><span class="dt">y2</span><span class="op">:</span><span class="st">"5"</span>})<span class="op">;</span>ln<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">"none"</span><span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(ln)<span class="op">;</span></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> t<span class="op">=</span><span class="fu">el</span>(<span class="st">"text"</span><span class="op">,</span>{<span class="st">"text-anchor"</span><span class="op">:</span><span class="st">"middle"</span><span class="op">,</span><span class="dt">fill</span><span class="op">:</span><span class="st">"#64748b"</span><span class="op">,</span><span class="st">"font-size"</span><span class="op">:</span><span class="st">"11"</span><span class="op">,</span><span class="st">"font-family"</span><span class="op">:</span><span class="st">"'SF Mono',monospace"</span><span class="op">,</span><span class="dt">dy</span><span class="op">:</span><span class="st">"16"</span>})<span class="op">;</span>t<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">"none"</span><span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(t)<span class="op">;</span></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a>    xTickPool<span class="op">.</span><span class="fu">push</span>({ln<span class="op">,</span>t})<span class="op">;</span></span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">appendChild</span>(<span class="fu">el</span>(<span class="st">"line"</span><span class="op">,</span>{<span class="dt">x1</span><span class="op">:</span><span class="bu">String</span>(cmg<span class="op">.</span><span class="at">l</span>)<span class="op">,</span><span class="dt">x2</span><span class="op">:</span><span class="bu">String</span>(cmg<span class="op">.</span><span class="at">l</span>)<span class="op">,</span><span class="dt">y1</span><span class="op">:</span><span class="bu">String</span>(cmg<span class="op">.</span><span class="at">t</span>)<span class="op">,</span><span class="dt">y2</span><span class="op">:</span><span class="bu">String</span>(cmg<span class="op">.</span><span class="at">t</span><span class="op">+</span>cch)<span class="op">,</span><span class="dt">stroke</span><span class="op">:</span><span class="st">"#94a3b8"</span>}))<span class="op">;</span></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> xLbl<span class="op">=</span><span class="fu">el</span>(<span class="st">"text"</span><span class="op">,</span>{<span class="st">"text-anchor"</span><span class="op">:</span><span class="st">"middle"</span><span class="op">,</span><span class="dt">fill</span><span class="op">:</span><span class="st">"#64748b"</span><span class="op">,</span><span class="st">"font-size"</span><span class="op">:</span><span class="st">"12"</span><span class="op">,</span><span class="dt">y</span><span class="op">:</span><span class="bu">String</span>(CH<span class="op">-</span><span class="dv">4</span>)})<span class="op">;</span></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a>  xLbl<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"Length of Stay (days)"</span><span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(xLbl)<span class="op">;</span></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yLbl<span class="op">=</span><span class="fu">el</span>(<span class="st">"text"</span><span class="op">,</span>{<span class="st">"text-anchor"</span><span class="op">:</span><span class="st">"middle"</span><span class="op">,</span><span class="dt">fill</span><span class="op">:</span><span class="st">"#64748b"</span><span class="op">,</span><span class="st">"font-size"</span><span class="op">:</span><span class="st">"12"</span><span class="op">,</span><span class="dt">x</span><span class="op">:</span><span class="st">"14"</span><span class="op">,</span><span class="dt">y</span><span class="op">:</span><span class="bu">String</span>(cmg<span class="op">.</span><span class="at">t</span><span class="op">+</span>cch<span class="op">/</span><span class="dv">2</span>)<span class="op">,</span><span class="dt">transform</span><span class="op">:</span><span class="vs">`rotate(-90,14,</span><span class="sc">${</span>cmg<span class="op">.</span><span class="at">t</span><span class="op">+</span>cch<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">)`</span>})<span class="op">;</span></span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a>  yLbl<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"Proportion"</span><span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(yLbl)<span class="op">;</span></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> legR1<span class="op">=</span><span class="fu">el</span>(<span class="st">"rect"</span><span class="op">,</span>{<span class="dt">x</span><span class="op">:</span><span class="st">"580"</span><span class="op">,</span><span class="dt">y</span><span class="op">:</span><span class="st">"8"</span><span class="op">,</span><span class="dt">width</span><span class="op">:</span><span class="st">"14"</span><span class="op">,</span><span class="dt">height</span><span class="op">:</span><span class="st">"10"</span><span class="op">,</span><span class="dt">rx</span><span class="op">:</span><span class="st">"2"</span><span class="op">,</span><span class="dt">fill</span><span class="op">:</span><span class="st">"#16a34a"</span><span class="op">,</span><span class="dt">opacity</span><span class="op">:</span><span class="st">"0.7"</span>})<span class="op">;</span></span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> legT1<span class="op">=</span><span class="fu">el</span>(<span class="st">"text"</span><span class="op">,</span>{<span class="dt">x</span><span class="op">:</span><span class="st">"600"</span><span class="op">,</span><span class="dt">y</span><span class="op">:</span><span class="st">"17"</span><span class="op">,</span><span class="dt">fill</span><span class="op">:</span><span class="st">"#475569"</span><span class="op">,</span><span class="st">"font-size"</span><span class="op">:</span><span class="st">"11"</span>})<span class="op">;</span>legT1<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"Observed LOS"</span><span class="op">;</span></span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> legL2<span class="op">=</span><span class="fu">el</span>(<span class="st">"line"</span><span class="op">,</span>{<span class="dt">x1</span><span class="op">:</span><span class="st">"580"</span><span class="op">,</span><span class="dt">x2</span><span class="op">:</span><span class="st">"594"</span><span class="op">,</span><span class="dt">y1</span><span class="op">:</span><span class="st">"30"</span><span class="op">,</span><span class="dt">y2</span><span class="op">:</span><span class="st">"30"</span><span class="op">,</span><span class="dt">stroke</span><span class="op">:</span><span class="st">"#dc2626"</span><span class="op">,</span><span class="st">"stroke-width"</span><span class="op">:</span><span class="st">"2.5"</span>})<span class="op">;</span></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> legT2<span class="op">=</span><span class="fu">el</span>(<span class="st">"text"</span><span class="op">,</span>{<span class="dt">x</span><span class="op">:</span><span class="st">"600"</span><span class="op">,</span><span class="dt">y</span><span class="op">:</span><span class="st">"34"</span><span class="op">,</span><span class="dt">fill</span><span class="op">:</span><span class="st">"#475569"</span><span class="op">,</span><span class="st">"font-size"</span><span class="op">:</span><span class="st">"11"</span>})<span class="op">;</span>legT2<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"Geometric(</span><span class="sc">\u03B3</span><span class="st">)"</span><span class="op">;</span></span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">appendChild</span>(legR1)<span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(legT1)<span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(legL2)<span class="op">;</span>svg<span class="op">.</span><span class="fu">appendChild</span>(legT2)<span class="op">;</span></span>
<span id="cb1-215"><a href="#cb1-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-216"><a href="#cb1-216" aria-hidden="true" tabindex="-1"></a>  wrapper<span class="op">.</span><span class="fu">appendChild</span>(svg)<span class="op">;</span></span>
<span id="cb1-217"><a href="#cb1-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-218"><a href="#cb1-218" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-219"><a href="#cb1-219" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 5. FIXED CHART SETUP (axes + theoretical line)</span></span>
<span id="cb1-220"><a href="#cb1-220" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-221"><a href="#cb1-221" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> chartHiX<span class="op">=</span><span class="dv">1</span><span class="op">,</span>chartMaxP<span class="op">=</span><span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb1-222"><a href="#cb1-222" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> chartSx<span class="op">,</span>chartSy<span class="op">,</span>chartBarW<span class="op">,</span>chartBaseline<span class="op">;</span></span>
<span id="cb1-223"><a href="#cb1-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-224"><a href="#cb1-224" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">initChart</span>(){</span>
<span id="cb1-225"><a href="#cb1-225" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> gamma<span class="op">=</span>SL<span class="op">.</span><span class="at">gamma</span><span class="op">.</span><span class="fu">val</span>()<span class="op">;</span></span>
<span id="cb1-226"><a href="#cb1-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-227"><a href="#cb1-227" aria-hidden="true" tabindex="-1"></a>    <span class="co">// X range: start at 1, go until geometric PMF &lt; 0.5%</span></span>
<span id="cb1-228"><a href="#cb1-228" aria-hidden="true" tabindex="-1"></a>    chartHiX<span class="op">=</span><span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">10</span><span class="op">,</span><span class="bu">Math</span><span class="op">.</span><span class="fu">ceil</span>(<span class="dv">1</span><span class="op">+</span><span class="bu">Math</span><span class="op">.</span><span class="fu">log</span>(<span class="fl">0.005</span><span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(gamma<span class="op">,</span><span class="fl">0.01</span>))<span class="op">/</span><span class="bu">Math</span><span class="op">.</span><span class="fu">log</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">1</span><span class="op">-</span>gamma<span class="op">,</span><span class="fl">0.01</span>))))<span class="op">;</span></span>
<span id="cb1-229"><a href="#cb1-229" aria-hidden="true" tabindex="-1"></a>    chartHiX<span class="op">=</span><span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(chartHiX<span class="op">,</span><span class="dv">60</span>)<span class="op">;</span></span>
<span id="cb1-230"><a href="#cb1-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-231"><a href="#cb1-231" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Y range: peak at k=1 is gamma</span></span>
<span id="cb1-232"><a href="#cb1-232" aria-hidden="true" tabindex="-1"></a>    chartMaxP<span class="op">=</span>gamma<span class="op">*</span><span class="fl">1.25</span><span class="op">;</span></span>
<span id="cb1-233"><a href="#cb1-233" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(chartMaxP<span class="op">&lt;</span><span class="fl">0.05</span>)chartMaxP<span class="op">=</span><span class="fl">0.05</span><span class="op">;</span></span>
<span id="cb1-234"><a href="#cb1-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-235"><a href="#cb1-235" aria-hidden="true" tabindex="-1"></a>    <span class="co">// X axis starts at 1 (not 0)</span></span>
<span id="cb1-236"><a href="#cb1-236" aria-hidden="true" tabindex="-1"></a>    chartSx<span class="op">=</span>x<span class="kw">=&gt;</span>cmg<span class="op">.</span><span class="at">l</span><span class="op">+</span>((x<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span>(chartHiX<span class="op">-</span><span class="dv">1</span>))<span class="op">*</span>ccw<span class="op">;</span></span>
<span id="cb1-237"><a href="#cb1-237" aria-hidden="true" tabindex="-1"></a>    chartSy<span class="op">=</span>y<span class="kw">=&gt;</span>cmg<span class="op">.</span><span class="at">t</span><span class="op">+</span>cch<span class="op">-</span>(y<span class="op">/</span>chartMaxP)<span class="op">*</span>cch<span class="op">;</span></span>
<span id="cb1-238"><a href="#cb1-238" aria-hidden="true" tabindex="-1"></a>    chartBarW<span class="op">=</span><span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">2</span><span class="op">,</span><span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="dv">24</span><span class="op">,</span>ccw<span class="op">/</span>(chartHiX<span class="op">-</span><span class="dv">1</span>)<span class="op">*</span><span class="fl">0.7</span>))<span class="op">;</span></span>
<span id="cb1-239"><a href="#cb1-239" aria-hidden="true" tabindex="-1"></a>    chartBaseline<span class="op">=</span><span class="fu">chartSy</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb1-240"><a href="#cb1-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-241"><a href="#cb1-241" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Grid</span></span>
<span id="cb1-242"><a href="#cb1-242" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;=</span><span class="dv">4</span><span class="op">;</span>i<span class="op">++</span>){</span>
<span id="cb1-243"><a href="#cb1-243" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> v<span class="op">=</span>(chartMaxP<span class="op">/</span><span class="dv">4</span>)<span class="op">*</span>i<span class="op">,</span>yy<span class="op">=</span><span class="fu">chartSy</span>(v)<span class="op">;</span></span>
<span id="cb1-244"><a href="#cb1-244" aria-hidden="true" tabindex="-1"></a>      gridLines[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x1"</span><span class="op">,</span>cmg<span class="op">.</span><span class="at">l</span>)<span class="op">;</span>gridLines[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x2"</span><span class="op">,</span>CW<span class="op">-</span>cmg<span class="op">.</span><span class="at">r</span>)<span class="op">;</span></span>
<span id="cb1-245"><a href="#cb1-245" aria-hidden="true" tabindex="-1"></a>      gridLines[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"y1"</span><span class="op">,</span>yy)<span class="op">;</span>gridLines[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"y2"</span><span class="op">,</span>yy)<span class="op">;</span></span>
<span id="cb1-246"><a href="#cb1-246" aria-hidden="true" tabindex="-1"></a>      yLabelsH[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x"</span><span class="op">,</span>cmg<span class="op">.</span><span class="at">l</span><span class="op">-</span><span class="dv">8</span>)<span class="op">;</span>yLabelsH[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"y"</span><span class="op">,</span>yy<span class="op">+</span><span class="dv">4</span>)<span class="op">;</span></span>
<span id="cb1-247"><a href="#cb1-247" aria-hidden="true" tabindex="-1"></a>      yLabelsH[i]<span class="op">.</span><span class="at">textContent</span><span class="op">=</span>v<span class="op">.</span><span class="fu">toFixed</span>(v<span class="op">&lt;</span><span class="fl">0.01</span><span class="op">?</span><span class="dv">3</span><span class="op">:</span><span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb1-248"><a href="#cb1-248" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-249"><a href="#cb1-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-250"><a href="#cb1-250" aria-hidden="true" tabindex="-1"></a>    <span class="co">// X axis</span></span>
<span id="cb1-251"><a href="#cb1-251" aria-hidden="true" tabindex="-1"></a>    xAx<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x1"</span><span class="op">,</span>cmg<span class="op">.</span><span class="at">l</span>)<span class="op">;</span>xAx<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x2"</span><span class="op">,</span>CW<span class="op">-</span>cmg<span class="op">.</span><span class="at">r</span>)<span class="op">;</span></span>
<span id="cb1-252"><a href="#cb1-252" aria-hidden="true" tabindex="-1"></a>    xAx<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"y1"</span><span class="op">,</span>chartBaseline)<span class="op">;</span>xAx<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"y2"</span><span class="op">,</span>chartBaseline)<span class="op">;</span></span>
<span id="cb1-253"><a href="#cb1-253" aria-hidden="true" tabindex="-1"></a>    xLbl<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x"</span><span class="op">,</span>cmg<span class="op">.</span><span class="at">l</span><span class="op">+</span>ccw<span class="op">/</span><span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb1-254"><a href="#cb1-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-255"><a href="#cb1-255" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> ts<span class="op">=</span>chartHiX<span class="op">&gt;</span><span class="dv">40</span><span class="op">?</span><span class="dv">5</span><span class="op">:</span>chartHiX<span class="op">&gt;</span><span class="dv">20</span><span class="op">?</span><span class="dv">2</span><span class="op">:</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb1-256"><a href="#cb1-256" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> ti<span class="op">=</span><span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-257"><a href="#cb1-257" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> x<span class="op">=</span><span class="dv">1</span><span class="op">;</span>x<span class="op">&lt;=</span>chartHiX<span class="op">&amp;&amp;</span>ti<span class="op">&lt;</span><span class="dv">20</span><span class="op">;</span>x<span class="op">+=</span>ts){</span>
<span id="cb1-258"><a href="#cb1-258" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> xx<span class="op">=</span><span class="fu">chartSx</span>(x)<span class="op">;</span></span>
<span id="cb1-259"><a href="#cb1-259" aria-hidden="true" tabindex="-1"></a>      xTickPool[ti]<span class="op">.</span><span class="at">ln</span><span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x1"</span><span class="op">,</span>xx)<span class="op">;</span>xTickPool[ti]<span class="op">.</span><span class="at">ln</span><span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x2"</span><span class="op">,</span>xx)<span class="op">;</span></span>
<span id="cb1-260"><a href="#cb1-260" aria-hidden="true" tabindex="-1"></a>      xTickPool[ti]<span class="op">.</span><span class="at">ln</span><span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"y1"</span><span class="op">,</span>chartBaseline)<span class="op">;</span>xTickPool[ti]<span class="op">.</span><span class="at">ln</span><span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"y2"</span><span class="op">,</span>chartBaseline<span class="op">+</span><span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb1-261"><a href="#cb1-261" aria-hidden="true" tabindex="-1"></a>      xTickPool[ti]<span class="op">.</span><span class="at">ln</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">""</span><span class="op">;</span></span>
<span id="cb1-262"><a href="#cb1-262" aria-hidden="true" tabindex="-1"></a>      xTickPool[ti]<span class="op">.</span><span class="at">t</span><span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x"</span><span class="op">,</span>xx)<span class="op">;</span>xTickPool[ti]<span class="op">.</span><span class="at">t</span><span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"y"</span><span class="op">,</span>chartBaseline<span class="op">+</span><span class="dv">5</span>)<span class="op">;</span></span>
<span id="cb1-263"><a href="#cb1-263" aria-hidden="true" tabindex="-1"></a>      xTickPool[ti]<span class="op">.</span><span class="at">t</span><span class="op">.</span><span class="at">textContent</span><span class="op">=</span>x<span class="op">;</span>xTickPool[ti]<span class="op">.</span><span class="at">t</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">""</span><span class="op">;</span></span>
<span id="cb1-264"><a href="#cb1-264" aria-hidden="true" tabindex="-1"></a>      ti<span class="op">++;</span></span>
<span id="cb1-265"><a href="#cb1-265" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-266"><a href="#cb1-266" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="op">;</span>ti<span class="op">&lt;</span><span class="dv">20</span><span class="op">;</span>ti<span class="op">++</span>){xTickPool[ti]<span class="op">.</span><span class="at">ln</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">"none"</span><span class="op">;</span>xTickPool[ti]<span class="op">.</span><span class="at">t</span><span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">"none"</span><span class="op">;</span>}</span>
<span id="cb1-267"><a href="#cb1-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-268"><a href="#cb1-268" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Theoretical geometric curve starting at k=1</span></span>
<span id="cb1-269"><a href="#cb1-269" aria-hidden="true" tabindex="-1"></a>    <span class="co">// P(X=k) = gamma * (1-gamma)^(k-1), k = 1, 2, ...</span></span>
<span id="cb1-270"><a href="#cb1-270" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> q<span class="op">=</span><span class="dv">1</span><span class="op">-</span>gamma<span class="op">;</span></span>
<span id="cb1-271"><a href="#cb1-271" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> d<span class="op">=</span><span class="st">""</span><span class="op">;</span></span>
<span id="cb1-272"><a href="#cb1-272" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> k<span class="op">=</span><span class="dv">1</span><span class="op">;</span>k<span class="op">&lt;=</span>chartHiX<span class="op">;</span>k<span class="op">+=</span><span class="fl">0.2</span>){</span>
<span id="cb1-273"><a href="#cb1-273" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> fx<span class="op">=</span>gamma<span class="op">*</span><span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(q<span class="op">,</span>k<span class="op">-</span><span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-274"><a href="#cb1-274" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> px<span class="op">=</span><span class="fu">chartSx</span>(k)<span class="op">,</span>py<span class="op">=</span><span class="fu">chartSy</span>(fx)<span class="op">;</span></span>
<span id="cb1-275"><a href="#cb1-275" aria-hidden="true" tabindex="-1"></a>      d<span class="op">+=</span>(k<span class="op">===</span><span class="dv">1</span><span class="op">?</span><span class="st">"M"</span><span class="op">:</span><span class="st">"L"</span>)<span class="op">+</span>px<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="op">+</span><span class="st">","</span><span class="op">+</span>py<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb1-276"><a href="#cb1-276" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-277"><a href="#cb1-277" aria-hidden="true" tabindex="-1"></a>    expPath<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"d"</span><span class="op">,</span>d)<span class="op">;</span></span>
<span id="cb1-278"><a href="#cb1-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-279"><a href="#cb1-279" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>BPOOL<span class="op">;</span>i<span class="op">++</span>)hBars[i]<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">"none"</span><span class="op">;</span></span>
<span id="cb1-280"><a href="#cb1-280" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-281"><a href="#cb1-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-282"><a href="#cb1-282" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-283"><a href="#cb1-283" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 6. SIMULATION STATE</span></span>
<span id="cb1-284"><a href="#cb1-284" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-285"><a href="#cb1-285" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> S_count<span class="op">=</span><span class="dv">0</span><span class="op">,</span>I_list<span class="op">=</span>[]<span class="op">,</span>R_list<span class="op">=</span>[]<span class="op">,</span>day<span class="op">=</span><span class="dv">0</span><span class="op">,</span>autoId<span class="op">=</span><span class="dv">0</span><span class="op">,</span>running<span class="op">=</span><span class="kw">false</span><span class="op">;</span></span>
<span id="cb1-286"><a href="#cb1-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-287"><a href="#cb1-287" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> rngState<span class="op">=</span><span class="dv">12345</span><span class="op">;</span></span>
<span id="cb1-288"><a href="#cb1-288" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">rng</span>(){rngState<span class="op">=</span>(rngState<span class="op">*</span><span class="dv">16807</span>)<span class="op">%</span><span class="dv">2147483647</span><span class="op">;</span><span class="cf">return</span>(rngState<span class="op">-</span><span class="dv">1</span>)<span class="op">/</span><span class="dv">2147483646</span><span class="op">;</span>}</span>
<span id="cb1-289"><a href="#cb1-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-290"><a href="#cb1-290" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">initSim</span>(){</span>
<span id="cb1-291"><a href="#cb1-291" aria-hidden="true" tabindex="-1"></a>    <span class="pp">clearInterval</span>(autoId)<span class="op">;</span>running<span class="op">=</span><span class="kw">false</span><span class="op">;</span></span>
<span id="cb1-292"><a href="#cb1-292" aria-hidden="true" tabindex="-1"></a>    btnAuto<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"⏩  Auto"</span><span class="op">;</span></span>
<span id="cb1-293"><a href="#cb1-293" aria-hidden="true" tabindex="-1"></a>    rngState<span class="op">=</span><span class="dv">12345</span><span class="op">+</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">&amp;</span><span class="bn">0xFFFF</span>)<span class="op">;</span></span>
<span id="cb1-294"><a href="#cb1-294" aria-hidden="true" tabindex="-1"></a>    S_count<span class="op">=</span>SL<span class="op">.</span><span class="at">s0</span><span class="op">.</span><span class="fu">val</span>()<span class="op">;</span></span>
<span id="cb1-295"><a href="#cb1-295" aria-hidden="true" tabindex="-1"></a>    I_list<span class="op">=</span>[]<span class="op">;</span></span>
<span id="cb1-296"><a href="#cb1-296" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>SL<span class="op">.</span><span class="at">i0</span><span class="op">.</span><span class="fu">val</span>()<span class="op">;</span>i<span class="op">++</span>)I_list<span class="op">.</span><span class="fu">push</span>({<span class="dt">days</span><span class="op">:</span><span class="dv">0</span>})<span class="op">;</span></span>
<span id="cb1-297"><a href="#cb1-297" aria-hidden="true" tabindex="-1"></a>    R_list<span class="op">=</span>[]<span class="op">;</span>day<span class="op">=</span><span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-298"><a href="#cb1-298" aria-hidden="true" tabindex="-1"></a>    <span class="fu">initChart</span>()<span class="op">;</span></span>
<span id="cb1-299"><a href="#cb1-299" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drawAll</span>()<span class="op">;</span></span>
<span id="cb1-300"><a href="#cb1-300" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-301"><a href="#cb1-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-302"><a href="#cb1-302" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">stepSim</span>(){</span>
<span id="cb1-303"><a href="#cb1-303" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(I_list<span class="op">.</span><span class="at">length</span><span class="op">===</span><span class="dv">0</span><span class="op">&amp;&amp;</span>day<span class="op">&gt;</span><span class="dv">0</span>)<span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-304"><a href="#cb1-304" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> beta<span class="op">=</span>SL<span class="op">.</span><span class="at">beta</span><span class="op">.</span><span class="fu">val</span>()<span class="op">,</span>gamma<span class="op">=</span>SL<span class="op">.</span><span class="at">gamma</span><span class="op">.</span><span class="fu">val</span>()<span class="op">;</span></span>
<span id="cb1-305"><a href="#cb1-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-306"><a href="#cb1-306" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> newInf<span class="op">=</span><span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(S_count<span class="op">,</span><span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(beta<span class="op">*</span>I_list<span class="op">.</span><span class="at">length</span>))<span class="op">;</span></span>
<span id="cb1-307"><a href="#cb1-307" aria-hidden="true" tabindex="-1"></a>    S_count<span class="op">-=</span>newInf<span class="op">;</span></span>
<span id="cb1-308"><a href="#cb1-308" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> newI<span class="op">=</span>[]<span class="op">;</span></span>
<span id="cb1-309"><a href="#cb1-309" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>newInf<span class="op">;</span>i<span class="op">++</span>)newI<span class="op">.</span><span class="fu">push</span>({<span class="dt">days</span><span class="op">:</span><span class="dv">0</span>})<span class="op">;</span></span>
<span id="cb1-310"><a href="#cb1-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-311"><a href="#cb1-311" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> stayI<span class="op">=</span>[]<span class="op">;</span></span>
<span id="cb1-312"><a href="#cb1-312" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>I_list<span class="op">.</span><span class="at">length</span><span class="op">;</span>i<span class="op">++</span>){</span>
<span id="cb1-313"><a href="#cb1-313" aria-hidden="true" tabindex="-1"></a>      I_list[i]<span class="op">.</span><span class="at">days</span><span class="op">++;</span></span>
<span id="cb1-314"><a href="#cb1-314" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">rng</span>()<span class="op">&lt;</span>gamma){R_list<span class="op">.</span><span class="fu">push</span>({<span class="dt">los</span><span class="op">:</span>I_list[i]<span class="op">.</span><span class="at">days</span>})<span class="op">;</span>}</span>
<span id="cb1-315"><a href="#cb1-315" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>{stayI<span class="op">.</span><span class="fu">push</span>(I_list[i])<span class="op">;</span>}</span>
<span id="cb1-316"><a href="#cb1-316" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-317"><a href="#cb1-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-318"><a href="#cb1-318" aria-hidden="true" tabindex="-1"></a>    I_list<span class="op">=</span>stayI<span class="op">.</span><span class="fu">concat</span>(newI)<span class="op">;</span></span>
<span id="cb1-319"><a href="#cb1-319" aria-hidden="true" tabindex="-1"></a>    day<span class="op">++;</span></span>
<span id="cb1-320"><a href="#cb1-320" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drawAll</span>()<span class="op">;</span></span>
<span id="cb1-321"><a href="#cb1-321" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-322"><a href="#cb1-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-323"><a href="#cb1-323" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-324"><a href="#cb1-324" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 7. RENDER BOXES</span></span>
<span id="cb1-325"><a href="#cb1-325" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-326"><a href="#cb1-326" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">personDot</span>(color<span class="op">,</span>text){</span>
<span id="cb1-327"><a href="#cb1-327" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> d<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"div"</span>)<span class="op">;</span></span>
<span id="cb1-328"><a href="#cb1-328" aria-hidden="true" tabindex="-1"></a>    d<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="vs">`</span></span>
<span id="cb1-329"><a href="#cb1-329" aria-hidden="true" tabindex="-1"></a><span class="vs">      width:</span><span class="sc">${</span>text<span class="op">?</span><span class="st">"auto"</span><span class="op">:</span><span class="st">"10px"</span><span class="sc">}</span><span class="vs">;height:</span><span class="sc">${</span>text<span class="op">?</span><span class="st">"auto"</span><span class="op">:</span><span class="st">"10px"</span><span class="sc">}</span><span class="vs">;min-width:10px;</span></span>
<span id="cb1-330"><a href="#cb1-330" aria-hidden="true" tabindex="-1"></a><span class="vs">      border-radius:</span><span class="sc">${</span>text<span class="op">?</span><span class="st">"6px"</span><span class="op">:</span><span class="st">"50%"</span><span class="sc">}</span><span class="vs">;background:</span><span class="sc">${</span>color<span class="sc">}</span><span class="vs">;</span></span>
<span id="cb1-331"><a href="#cb1-331" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>text<span class="op">?</span><span class="st">"padding:1px 4px;font-size:9px;font-weight:700;color:#fff;font-family:'SF Mono',monospace;text-align:center;"</span><span class="op">:</span><span class="st">""</span><span class="sc">}</span></span>
<span id="cb1-332"><a href="#cb1-332" aria-hidden="true" tabindex="-1"></a><span class="vs">    `</span><span class="op">;</span></span>
<span id="cb1-333"><a href="#cb1-333" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(text)d<span class="op">.</span><span class="at">textContent</span><span class="op">=</span>text<span class="op">;</span></span>
<span id="cb1-334"><a href="#cb1-334" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> d<span class="op">;</span></span>
<span id="cb1-335"><a href="#cb1-335" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-336"><a href="#cb1-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-337"><a href="#cb1-337" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">drawBoxes</span>(){</span>
<span id="cb1-338"><a href="#cb1-338" aria-hidden="true" tabindex="-1"></a>    boxS<span class="op">.</span><span class="at">cnt</span><span class="op">.</span><span class="at">textContent</span><span class="op">=</span>S_count<span class="op">;</span></span>
<span id="cb1-339"><a href="#cb1-339" aria-hidden="true" tabindex="-1"></a>    boxI<span class="op">.</span><span class="at">cnt</span><span class="op">.</span><span class="at">textContent</span><span class="op">=</span>I_list<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb1-340"><a href="#cb1-340" aria-hidden="true" tabindex="-1"></a>    boxR<span class="op">.</span><span class="at">cnt</span><span class="op">.</span><span class="at">textContent</span><span class="op">=</span>R_list<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb1-341"><a href="#cb1-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-342"><a href="#cb1-342" aria-hidden="true" tabindex="-1"></a>    boxS<span class="op">.</span><span class="at">grid</span><span class="op">.</span><span class="at">innerHTML</span><span class="op">=</span><span class="st">""</span><span class="op">;</span></span>
<span id="cb1-343"><a href="#cb1-343" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> sShow<span class="op">=</span><span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(S_count<span class="op">,</span><span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb1-344"><a href="#cb1-344" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>sShow<span class="op">;</span>i<span class="op">++</span>)boxS<span class="op">.</span><span class="at">grid</span><span class="op">.</span><span class="fu">appendChild</span>(<span class="fu">personDot</span>(<span class="st">"#3b82f6"</span>))<span class="op">;</span></span>
<span id="cb1-345"><a href="#cb1-345" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(S_count<span class="op">&gt;</span><span class="dv">100</span>){<span class="kw">const</span> m<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"span"</span>)<span class="op">;</span>m<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"font-size:10px;color:#64748b;margin-left:4px;"</span><span class="op">;</span>m<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"+"</span><span class="op">+</span>(S_count<span class="op">-</span><span class="dv">100</span>)<span class="op">;</span>boxS<span class="op">.</span><span class="at">grid</span><span class="op">.</span><span class="fu">appendChild</span>(m)<span class="op">;</span>}</span>
<span id="cb1-346"><a href="#cb1-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-347"><a href="#cb1-347" aria-hidden="true" tabindex="-1"></a>    boxI<span class="op">.</span><span class="at">grid</span><span class="op">.</span><span class="at">innerHTML</span><span class="op">=</span><span class="st">""</span><span class="op">;</span></span>
<span id="cb1-348"><a href="#cb1-348" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> iShow<span class="op">=</span><span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(I_list<span class="op">.</span><span class="at">length</span><span class="op">,</span><span class="dv">60</span>)<span class="op">;</span></span>
<span id="cb1-349"><a href="#cb1-349" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>iShow<span class="op">;</span>i<span class="op">++</span>)boxI<span class="op">.</span><span class="at">grid</span><span class="op">.</span><span class="fu">appendChild</span>(<span class="fu">personDot</span>(<span class="st">"#dc2626"</span><span class="op">,</span><span class="bu">String</span>(I_list[i]<span class="op">.</span><span class="at">days</span>)))<span class="op">;</span></span>
<span id="cb1-350"><a href="#cb1-350" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(I_list<span class="op">.</span><span class="at">length</span><span class="op">&gt;</span><span class="dv">60</span>){<span class="kw">const</span> m<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"span"</span>)<span class="op">;</span>m<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"font-size:10px;color:#64748b;margin-left:4px;"</span><span class="op">;</span>m<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"+"</span><span class="op">+</span>(I_list<span class="op">.</span><span class="at">length</span><span class="op">-</span><span class="dv">60</span>)<span class="op">;</span>boxI<span class="op">.</span><span class="at">grid</span><span class="op">.</span><span class="fu">appendChild</span>(m)<span class="op">;</span>}</span>
<span id="cb1-351"><a href="#cb1-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-352"><a href="#cb1-352" aria-hidden="true" tabindex="-1"></a>    boxR<span class="op">.</span><span class="at">grid</span><span class="op">.</span><span class="at">innerHTML</span><span class="op">=</span><span class="st">""</span><span class="op">;</span></span>
<span id="cb1-353"><a href="#cb1-353" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> rShow<span class="op">=</span><span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(R_list<span class="op">.</span><span class="at">length</span><span class="op">,</span><span class="dv">60</span>)<span class="op">;</span></span>
<span id="cb1-354"><a href="#cb1-354" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span>R_list<span class="op">.</span><span class="at">length</span><span class="op">-</span><span class="dv">1</span><span class="op">;</span>i<span class="op">&gt;=</span><span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span>R_list<span class="op">.</span><span class="at">length</span><span class="op">-</span>rShow)<span class="op">;</span>i<span class="op">--</span>)</span>
<span id="cb1-355"><a href="#cb1-355" aria-hidden="true" tabindex="-1"></a>      boxR<span class="op">.</span><span class="at">grid</span><span class="op">.</span><span class="fu">appendChild</span>(<span class="fu">personDot</span>(<span class="st">"#16a34a"</span><span class="op">,</span><span class="bu">String</span>(R_list[i]<span class="op">.</span><span class="at">los</span>)))<span class="op">;</span></span>
<span id="cb1-356"><a href="#cb1-356" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(R_list<span class="op">.</span><span class="at">length</span><span class="op">&gt;</span><span class="dv">60</span>){<span class="kw">const</span> m<span class="op">=</span><span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">"span"</span>)<span class="op">;</span>m<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">cssText</span><span class="op">=</span><span class="st">"font-size:10px;color:#64748b;margin-left:4px;"</span><span class="op">;</span>m<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"+"</span><span class="op">+</span>(R_list<span class="op">.</span><span class="at">length</span><span class="op">-</span><span class="dv">60</span>)<span class="op">;</span>boxR<span class="op">.</span><span class="at">grid</span><span class="op">.</span><span class="fu">appendChild</span>(m)<span class="op">;</span>}</span>
<span id="cb1-357"><a href="#cb1-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-358"><a href="#cb1-358" aria-hidden="true" tabindex="-1"></a>    dayLabel<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"Day "</span><span class="op">+</span>day<span class="op">+</span>(I_list<span class="op">.</span><span class="at">length</span><span class="op">===</span><span class="dv">0</span><span class="op">&amp;&amp;</span>day<span class="op">&gt;</span><span class="dv">0</span><span class="op">?</span><span class="st">" — Epidemic ended"</span><span class="op">:</span><span class="st">""</span>)<span class="op">;</span></span>
<span id="cb1-359"><a href="#cb1-359" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-360"><a href="#cb1-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-361"><a href="#cb1-361" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-362"><a href="#cb1-362" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 8. HISTOGRAM BARS ONLY</span></span>
<span id="cb1-363"><a href="#cb1-363" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-364"><a href="#cb1-364" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">drawHistBars</span>(){</span>
<span id="cb1-365"><a href="#cb1-365" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(R_list<span class="op">.</span><span class="at">length</span><span class="op">===</span><span class="dv">0</span>){</span>
<span id="cb1-366"><a href="#cb1-366" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>BPOOL<span class="op">;</span>i<span class="op">++</span>)hBars[i]<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">"none"</span><span class="op">;</span></span>
<span id="cb1-367"><a href="#cb1-367" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span><span class="op">;</span></span>
<span id="cb1-368"><a href="#cb1-368" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-369"><a href="#cb1-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-370"><a href="#cb1-370" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> losArr<span class="op">=</span>R_list<span class="op">.</span><span class="fu">map</span>(r<span class="kw">=&gt;</span>r<span class="op">.</span><span class="at">los</span>)<span class="op">;</span></span>
<span id="cb1-371"><a href="#cb1-371" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> maxLOS<span class="op">=</span><span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>losArr)<span class="op">;</span></span>
<span id="cb1-372"><a href="#cb1-372" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> bins<span class="op">=</span><span class="kw">new</span> <span class="bu">Int32Array</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(maxLOS<span class="op">+</span><span class="dv">1</span><span class="op">,</span>BPOOL))<span class="op">;</span></span>
<span id="cb1-373"><a href="#cb1-373" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">const</span> v <span class="kw">of</span> losArr)<span class="cf">if</span>(v<span class="op">&lt;</span>bins<span class="op">.</span><span class="at">length</span>)bins[v]<span class="op">++;</span></span>
<span id="cb1-374"><a href="#cb1-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-375"><a href="#cb1-375" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> total<span class="op">=</span>R_list<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb1-376"><a href="#cb1-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-377"><a href="#cb1-377" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>BPOOL<span class="op">;</span>i<span class="op">++</span>){</span>
<span id="cb1-378"><a href="#cb1-378" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(i<span class="op">&gt;=</span><span class="dv">1</span><span class="op">&amp;&amp;</span>i<span class="op">&lt;</span>bins<span class="op">.</span><span class="at">length</span><span class="op">&amp;&amp;</span>bins[i]<span class="op">&gt;</span><span class="dv">0</span>){</span>
<span id="cb1-379"><a href="#cb1-379" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> prop<span class="op">=</span>bins[i]<span class="op">/</span>total<span class="op">;</span></span>
<span id="cb1-380"><a href="#cb1-380" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> bx<span class="op">=</span><span class="fu">chartSx</span>(i)<span class="op">-</span>chartBarW<span class="op">/</span><span class="dv">2</span><span class="op">;</span></span>
<span id="cb1-381"><a href="#cb1-381" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> by<span class="op">=</span><span class="fu">chartSy</span>(prop)<span class="op">;</span></span>
<span id="cb1-382"><a href="#cb1-382" aria-hidden="true" tabindex="-1"></a>        hBars[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"x"</span><span class="op">,</span>bx)<span class="op">;</span></span>
<span id="cb1-383"><a href="#cb1-383" aria-hidden="true" tabindex="-1"></a>        hBars[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"y"</span><span class="op">,</span>by)<span class="op">;</span></span>
<span id="cb1-384"><a href="#cb1-384" aria-hidden="true" tabindex="-1"></a>        hBars[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"width"</span><span class="op">,</span>chartBarW)<span class="op">;</span></span>
<span id="cb1-385"><a href="#cb1-385" aria-hidden="true" tabindex="-1"></a>        hBars[i]<span class="op">.</span><span class="fu">setAttribute</span>(<span class="st">"height"</span><span class="op">,</span><span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span>chartBaseline<span class="op">-</span>by))<span class="op">;</span></span>
<span id="cb1-386"><a href="#cb1-386" aria-hidden="true" tabindex="-1"></a>        hBars[i]<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">""</span><span class="op">;</span></span>
<span id="cb1-387"><a href="#cb1-387" aria-hidden="true" tabindex="-1"></a>      }<span class="cf">else</span>{</span>
<span id="cb1-388"><a href="#cb1-388" aria-hidden="true" tabindex="-1"></a>        hBars[i]<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">display</span><span class="op">=</span><span class="st">"none"</span><span class="op">;</span></span>
<span id="cb1-389"><a href="#cb1-389" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb1-390"><a href="#cb1-390" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-391"><a href="#cb1-391" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-392"><a href="#cb1-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-393"><a href="#cb1-393" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">drawAll</span>(){<span class="fu">drawBoxes</span>()<span class="op">;</span><span class="fu">drawHistBars</span>()<span class="op">;</span>}</span>
<span id="cb1-394"><a href="#cb1-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-395"><a href="#cb1-395" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-396"><a href="#cb1-396" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 9. BUTTONS</span></span>
<span id="cb1-397"><a href="#cb1-397" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-398"><a href="#cb1-398" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">onStep</span>(){<span class="fu">stepSim</span>()<span class="op">;</span>}</span>
<span id="cb1-399"><a href="#cb1-399" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">onAuto</span>(){</span>
<span id="cb1-400"><a href="#cb1-400" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(running){<span class="pp">clearInterval</span>(autoId)<span class="op">;</span>running<span class="op">=</span><span class="kw">false</span><span class="op">;</span>btnAuto<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"⏩  Auto"</span><span class="op">;</span><span class="cf">return</span><span class="op">;</span>}</span>
<span id="cb1-401"><a href="#cb1-401" aria-hidden="true" tabindex="-1"></a>    running<span class="op">=</span><span class="kw">true</span><span class="op">;</span>btnAuto<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"⏸  Stop"</span><span class="op">;</span></span>
<span id="cb1-402"><a href="#cb1-402" aria-hidden="true" tabindex="-1"></a>    autoId<span class="op">=</span><span class="pp">setInterval</span>(()<span class="kw">=&gt;</span>{</span>
<span id="cb1-403"><a href="#cb1-403" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(I_list<span class="op">.</span><span class="at">length</span><span class="op">===</span><span class="dv">0</span><span class="op">&amp;&amp;</span>day<span class="op">&gt;</span><span class="dv">0</span>){<span class="pp">clearInterval</span>(autoId)<span class="op">;</span>running<span class="op">=</span><span class="kw">false</span><span class="op">;</span>btnAuto<span class="op">.</span><span class="at">textContent</span><span class="op">=</span><span class="st">"⏩  Auto"</span><span class="op">;</span><span class="cf">return</span><span class="op">;</span>}</span>
<span id="cb1-404"><a href="#cb1-404" aria-hidden="true" tabindex="-1"></a>      <span class="fu">stepSim</span>()<span class="op">;</span></span>
<span id="cb1-405"><a href="#cb1-405" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span><span class="dv">200</span>)<span class="op">;</span></span>
<span id="cb1-406"><a href="#cb1-406" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-407"><a href="#cb1-407" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">onReset</span>(){<span class="fu">initSim</span>()<span class="op">;</span>}</span>
<span id="cb1-408"><a href="#cb1-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-409"><a href="#cb1-409" aria-hidden="true" tabindex="-1"></a>  btnStep<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span>onStep)<span class="op">;</span></span>
<span id="cb1-410"><a href="#cb1-410" aria-hidden="true" tabindex="-1"></a>  btnAuto<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span>onAuto)<span class="op">;</span></span>
<span id="cb1-411"><a href="#cb1-411" aria-hidden="true" tabindex="-1"></a>  btnReset<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"click"</span><span class="op">,</span>onReset)<span class="op">;</span></span>
<span id="cb1-412"><a href="#cb1-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-413"><a href="#cb1-413" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">onParam</span>(){SL<span class="op">.</span><span class="at">s0</span><span class="op">.</span><span class="fu">sync</span>()<span class="op">;</span>SL<span class="op">.</span><span class="at">i0</span><span class="op">.</span><span class="fu">sync</span>()<span class="op">;</span>SL<span class="op">.</span><span class="at">beta</span><span class="op">.</span><span class="fu">sync</span>()<span class="op">;</span>SL<span class="op">.</span><span class="at">gamma</span><span class="op">.</span><span class="fu">sync</span>()<span class="op">;</span><span class="cf">if</span>(<span class="op">!</span>running)<span class="fu">initSim</span>()<span class="op">;</span>}</span>
<span id="cb1-414"><a href="#cb1-414" aria-hidden="true" tabindex="-1"></a>  SL<span class="op">.</span><span class="at">s0</span><span class="op">.</span><span class="at">input</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span>onParam)<span class="op">;</span></span>
<span id="cb1-415"><a href="#cb1-415" aria-hidden="true" tabindex="-1"></a>  SL<span class="op">.</span><span class="at">i0</span><span class="op">.</span><span class="at">input</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span>onParam)<span class="op">;</span></span>
<span id="cb1-416"><a href="#cb1-416" aria-hidden="true" tabindex="-1"></a>  SL<span class="op">.</span><span class="at">beta</span><span class="op">.</span><span class="at">input</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span>onParam)<span class="op">;</span></span>
<span id="cb1-417"><a href="#cb1-417" aria-hidden="true" tabindex="-1"></a>  SL<span class="op">.</span><span class="at">gamma</span><span class="op">.</span><span class="at">input</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span>onParam)<span class="op">;</span></span>
<span id="cb1-418"><a href="#cb1-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-419"><a href="#cb1-419" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-420"><a href="#cb1-420" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 10. INIT &amp; CLEANUP</span></span>
<span id="cb1-421"><a href="#cb1-421" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ══════════════════════════════════════════════════════</span></span>
<span id="cb1-422"><a href="#cb1-422" aria-hidden="true" tabindex="-1"></a>  <span class="fu">initSim</span>()<span class="op">;</span></span>
<span id="cb1-423"><a href="#cb1-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-424"><a href="#cb1-424" aria-hidden="true" tabindex="-1"></a>  invalidation<span class="op">.</span><span class="fu">then</span>(()<span class="kw">=&gt;</span>{</span>
<span id="cb1-425"><a href="#cb1-425" aria-hidden="true" tabindex="-1"></a>    <span class="pp">clearInterval</span>(autoId)<span class="op">;</span></span>
<span id="cb1-426"><a href="#cb1-426" aria-hidden="true" tabindex="-1"></a>    btnStep<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"click"</span><span class="op">,</span>onStep)<span class="op">;</span></span>
<span id="cb1-427"><a href="#cb1-427" aria-hidden="true" tabindex="-1"></a>    btnAuto<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"click"</span><span class="op">,</span>onAuto)<span class="op">;</span></span>
<span id="cb1-428"><a href="#cb1-428" aria-hidden="true" tabindex="-1"></a>    btnReset<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"click"</span><span class="op">,</span>onReset)<span class="op">;</span></span>
<span id="cb1-429"><a href="#cb1-429" aria-hidden="true" tabindex="-1"></a>    SL<span class="op">.</span><span class="at">s0</span><span class="op">.</span><span class="at">input</span><span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span>onParam)<span class="op">;</span></span>
<span id="cb1-430"><a href="#cb1-430" aria-hidden="true" tabindex="-1"></a>    SL<span class="op">.</span><span class="at">i0</span><span class="op">.</span><span class="at">input</span><span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span>onParam)<span class="op">;</span></span>
<span id="cb1-431"><a href="#cb1-431" aria-hidden="true" tabindex="-1"></a>    SL<span class="op">.</span><span class="at">beta</span><span class="op">.</span><span class="at">input</span><span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span>onParam)<span class="op">;</span></span>
<span id="cb1-432"><a href="#cb1-432" aria-hidden="true" tabindex="-1"></a>    SL<span class="op">.</span><span class="at">gamma</span><span class="op">.</span><span class="at">input</span><span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span>onParam)<span class="op">;</span></span>
<span id="cb1-433"><a href="#cb1-433" aria-hidden="true" tabindex="-1"></a>    I_list<span class="op">=</span>[]<span class="op">;</span>R_list<span class="op">=</span>[]<span class="op">;</span></span>
<span id="cb1-434"><a href="#cb1-434" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb1-435"><a href="#cb1-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-436"><a href="#cb1-436" aria-hidden="true" tabindex="-1"></a>  wrapper<span class="op">.</span><span class="at">value</span><span class="op">=</span>{}<span class="op">;</span></span>
<span id="cb1-437"><a href="#cb1-437" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> wrapper<span class="op">;</span></span>
<span id="cb1-438"><a href="#cb1-438" aria-hidden="true" tabindex="-1"></a>})()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<p><strong>Tại sao thời gian ở khoảng <span class="math inline">\(I\)</span> lại là hàm mũ?</strong></p>
<p>Hãy tưởng tượng việc ở trong khoang nhiễm (<span class="math inline">\(I\)</span>) giống như tham gia một trò chơi may rủi mỗi ngày.Giả sử mỗi ngày có một tỷ lệ cố định <span class="math inline">\(p\)</span> số người sẽ hồi phục (rời đi).<span class="math inline">\(\rightarrow\)</span> Tỷ lệ người còn ở lại sau mỗi ngày là <span class="math inline">\((1 - p)\)</span>.Quy luật đào thải sẽ diễn ra như sau:Ngày 1: Bạn phải “sống sót” qua đợt lọc đầu tiên. Xác suất còn lại: <span class="math inline">\((1 - p)\)</span>.Ngày 2: Bạn phải tiếp tục sống sót qua đợt lọc thứ hai. Xác suất là: <span class="math inline">\((1 - p) \times (1 - p) = (1 - p)^2\)</span>.Ngày <span class="math inline">\(t\)</span>: Bạn phải sống sót qua <span class="math inline">\(t\)</span> lần lọc liên tiếp. Xác suất là: <span class="math inline">\((1 - p)^t\)</span>.</p>
<p>Số lượng người còn lại trong khoang <span class="math inline">\(I\)</span> giảm đi theo luỹ thừa của thời gian (cấp số nhân). Khi chúng ta chia nhỏ thời gian đến vô hạn (từ ngày <span class="math inline">\(\to\)</span> giờ <span class="math inline">\(\to\)</span> giây), công thức <span class="math inline">\((1 - p)^t\)</span> sẽ chuyển thành hàm số mũ liên tục <span class="math inline">\(e^{-\lambda t}\)</span>.</p>
<p>Đó là lý do tại sao thời gian lưu trú tuân theo phân phối mũ.</p>


</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxyXG52aWV3b2Ygc2lyX3NpbSA9ICgoKSA9PiB7XHJcbiAgLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAgLy8gMS4gU1RZTEVcclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICB3cmFwcGVyLnN0eWxlLmNzc1RleHQgPSBgXHJcbiAgICBkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2FsaWduLWl0ZW1zOmNlbnRlcjtcclxuICAgIGZvbnQtZmFtaWx5Oi1hcHBsZS1zeXN0ZW0sQmxpbmtNYWNTeXN0ZW1Gb250LFwiU2Vnb2UgVUlcIixSb2JvdG8sc2Fucy1zZXJpZjtcclxuICAgIHdpZHRoOjEwMCU7bWF4LXdpZHRoOjk2MHB4O21hcmdpbjowIGF1dG87XHJcbiAgYDtcclxuXHJcbiAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgc3R5bGUudGV4dENvbnRlbnQgPSBgXHJcbiAgICAuc2lyLXNsaWRlcntwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6OHB4O2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQ6I2UyZThmMDt9XHJcbiAgICAuc2lyLXNsaWRlci1maWxse3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtoZWlnaHQ6MTAwJTtib3JkZXItcmFkaXVzOjRweDt0cmFuc2l0aW9uOndpZHRoIDAuMDRzO31cclxuICAgIC5zaXItc2xpZGVyIGlucHV0W3R5cGU9cmFuZ2Vde1xyXG4gICAgICBwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtcclxuICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7YXBwZWFyYW5jZTpub25lO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7XHJcbiAgICAgIGN1cnNvcjpwb2ludGVyO21hcmdpbjowO3BhZGRpbmc6MDtcclxuICAgIH1cclxuICAgIC5zaXItc2xpZGVyIGlucHV0W3R5cGU9cmFuZ2VdOjotd2Via2l0LXNsaWRlci10aHVtYntcclxuICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7YXBwZWFyYW5jZTpub25lO3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7Ym9yZGVyLXJhZGl1czo1MCU7XHJcbiAgICAgIGJvcmRlcjozcHggc29saWQgI2ZmZjtib3gtc2hhZG93OjAgMXB4IDVweCByZ2JhKDAsMCwwLDAuMjgpO1xyXG4gICAgICBjdXJzb3I6cG9pbnRlcjttYXJnaW4tdG9wOi02cHg7YmFja2dyb3VuZDojNDc1NTY5O1xyXG4gICAgfVxyXG4gICAgLnNpci1zbGlkZXIgaW5wdXRbdHlwZT1yYW5nZV06Oi1tb3otcmFuZ2UtdGh1bWJ7XHJcbiAgICAgIHdpZHRoOjE0cHg7aGVpZ2h0OjE0cHg7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyOjNweCBzb2xpZCAjZmZmO1xyXG4gICAgICBib3gtc2hhZG93OjAgMXB4IDVweCByZ2JhKDAsMCwwLDAuMjgpO2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6IzQ3NTU2OTtcclxuICAgIH1cclxuICAgIC5zaXItc2xpZGVyIGlucHV0W3R5cGU9cmFuZ2VdOjotd2Via2l0LXNsaWRlci1ydW5uYWJsZS10cmFja3toZWlnaHQ6OHB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7fVxyXG4gICAgLnNpci1zbGlkZXIgaW5wdXRbdHlwZT1yYW5nZV06Oi1tb3otcmFuZ2UtdHJhY2t7aGVpZ2h0OjhweDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O31cclxuICAgIC5zaXItc2xpZGVyLWJsdWUgaW5wdXRbdHlwZT1yYW5nZV06Oi13ZWJraXQtc2xpZGVyLXRodW1ie2JhY2tncm91bmQ6IzNiODJmNjt9XHJcbiAgICAuc2lyLXNsaWRlci1ibHVlIGlucHV0W3R5cGU9cmFuZ2VdOjotbW96LXJhbmdlLXRodW1ie2JhY2tncm91bmQ6IzNiODJmNjt9XHJcbiAgICAuc2lyLXNsaWRlci1yZWQgaW5wdXRbdHlwZT1yYW5nZV06Oi13ZWJraXQtc2xpZGVyLXRodW1ie2JhY2tncm91bmQ6I2RjMjYyNjt9XHJcbiAgICAuc2lyLXNsaWRlci1yZWQgaW5wdXRbdHlwZT1yYW5nZV06Oi1tb3otcmFuZ2UtdGh1bWJ7YmFja2dyb3VuZDojZGMyNjI2O31cclxuICAgIC5zaXItc2xpZGVyLWFtYmVyIGlucHV0W3R5cGU9cmFuZ2VdOjotd2Via2l0LXNsaWRlci10aHVtYntiYWNrZ3JvdW5kOiNkOTc3MDY7fVxyXG4gICAgLnNpci1zbGlkZXItYW1iZXIgaW5wdXRbdHlwZT1yYW5nZV06Oi1tb3otcmFuZ2UtdGh1bWJ7YmFja2dyb3VuZDojZDk3NzA2O31cclxuICAgIC5zaXItc2xpZGVyLWdyZWVuIGlucHV0W3R5cGU9cmFuZ2VdOjotd2Via2l0LXNsaWRlci10aHVtYntiYWNrZ3JvdW5kOiMxNmEzNGE7fVxyXG4gICAgLnNpci1zbGlkZXItZ3JlZW4gaW5wdXRbdHlwZT1yYW5nZV06Oi1tb3otcmFuZ2UtdGh1bWJ7YmFja2dyb3VuZDojMTZhMzRhO31cclxuICAgIC5zaXItYnRue1xyXG4gICAgICBwYWRkaW5nOjhweCAwO2JvcmRlci1yYWRpdXM6OHB4O2JvcmRlcjoxcHggc29saWQgI2QxZDVkYjtcclxuICAgICAgYmFja2dyb3VuZDojZmZmO2NvbG9yOiMzNzQxNTE7Zm9udC1zaXplOjEzcHg7Zm9udC13ZWlnaHQ6NjAwO1xyXG4gICAgICBjdXJzb3I6cG9pbnRlcjt0cmFuc2l0aW9uOmJhY2tncm91bmQgMC4xcztmb250LWZhbWlseTppbmhlcml0O3RleHQtYWxpZ246Y2VudGVyO2ZsZXg6MTtcclxuICAgIH1cclxuICAgIC5zaXItYnRuOmhvdmVye2JhY2tncm91bmQ6I2YzZjRmNjt9XHJcbiAgICAuc2lyLWJ0bi1zdGVwe2JhY2tncm91bmQ6IzNiODJmNjtjb2xvcjojZmZmO2JvcmRlci1jb2xvcjojMjU2M2ViO31cclxuICAgIC5zaXItYnRuLXN0ZXA6aG92ZXJ7YmFja2dyb3VuZDojMjU2M2ViO2NvbG9yOiNmZmY7fVxyXG4gICAgLnNpci1idG4tYXV0b3tiYWNrZ3JvdW5kOiMxNmEzNGE7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6IzE1ODAzZDt9XHJcbiAgICAuc2lyLWJ0bi1hdXRvOmhvdmVye2JhY2tncm91bmQ6IzE1ODAzZDtjb2xvcjojZmZmO31cclxuICAgIC5zaXItYnRuLXJlc2V0e2JhY2tncm91bmQ6I2ZlZjJmMjtjb2xvcjojZGMyNjI2O2JvcmRlci1jb2xvcjojZmVjYWNhO31cclxuICAgIC5zaXItYnRuLXJlc2V0OmhvdmVye2JhY2tncm91bmQ6I2ZlZTJlMjtjb2xvcjojZGMyNjI2O31cclxuICBgO1xyXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG5cclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICAvLyAyLiBTTElERVJTXHJcbiAgLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAgZnVuY3Rpb24gY3JlYXRlU2xpZGVyKGxhYmVsLG1pbixtYXgsc3RlcCx2YWwsY29sb3IsY2xzKXtcclxuICAgIGNvbnN0IHJvdz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgcm93LnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXg6MTttaW4td2lkdGg6MTQwcHg7XCI7XHJcbiAgICBjb25zdCBoZWFkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBoZWFkLnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6YmFzZWxpbmU7bWFyZ2luLWJvdHRvbTo1cHg7XCI7XHJcbiAgICBjb25zdCBsYmw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICBsYmwuc3R5bGUuY3NzVGV4dD1cImZvbnQtc2l6ZToxMXB4O2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNjQ3NDhiO2xldHRlci1zcGFjaW5nOjAuM3B4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtcIjtcclxuICAgIGxibC50ZXh0Q29udGVudD1sYWJlbDtcclxuICAgIGNvbnN0IHZhbFNwYW49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICB2YWxTcGFuLnN0eWxlLmNzc1RleHQ9YGZvbnQtc2l6ZToxN3B4O2ZvbnQtd2VpZ2h0OjgwMDtjb2xvcjoke2NvbG9yfTtmb250LXZhcmlhbnQtbnVtZXJpYzp0YWJ1bGFyLW51bXM7Zm9udC1mYW1pbHk6XCJTRiBNb25vXCIsU0ZNb25vLVJlZ3VsYXIsTWVubG8sQ29uc29sYXMsbW9ub3NwYWNlO2A7XHJcbiAgICB2YWxTcGFuLnRleHRDb250ZW50PXN0ZXA8MT9OdW1iZXIodmFsKS50b0ZpeGVkKDIpOnZhbDtcclxuICAgIGhlYWQuYXBwZW5kQ2hpbGQobGJsKTtoZWFkLmFwcGVuZENoaWxkKHZhbFNwYW4pO1xyXG4gICAgY29uc3QgdHJhY2s9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRyYWNrLmNsYXNzTmFtZT1cInNpci1zbGlkZXIgc2lyLXNsaWRlci1cIitjbHM7XHJcbiAgICBjb25zdCBmaWxsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBmaWxsLmNsYXNzTmFtZT1cInNpci1zbGlkZXItZmlsbFwiO2ZpbGwuc3R5bGUuYmFja2dyb3VuZD1jb2xvcjtcclxuICAgIGZpbGwuc3R5bGUud2lkdGg9KCh2YWwtbWluKS8obWF4LW1pbikpKjEwMCtcIiVcIjtcclxuICAgIHRyYWNrLmFwcGVuZENoaWxkKGZpbGwpO1xyXG4gICAgY29uc3QgaW5wdXQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgaW5wdXQudHlwZT1cInJhbmdlXCI7aW5wdXQubWluPW1pbjtpbnB1dC5tYXg9bWF4O2lucHV0LnN0ZXA9c3RlcDtpbnB1dC52YWx1ZT12YWw7XHJcbiAgICB0cmFjay5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICByb3cuYXBwZW5kQ2hpbGQoaGVhZCk7cm93LmFwcGVuZENoaWxkKHRyYWNrKTtcclxuICAgIHJldHVybntlbDpyb3csaW5wdXQsdmFsU3BhbixmaWxsLFxyXG4gICAgICB2YWwoKXtyZXR1cm4raW5wdXQudmFsdWV9LFxyXG4gICAgICBzeW5jKCl7Y29uc3Qgdj0raW5wdXQudmFsdWU7dmFsU3Bhbi50ZXh0Q29udGVudD1zdGVwPDE/di50b0ZpeGVkKDIpOlN0cmluZyh2KTtmaWxsLnN0eWxlLndpZHRoPSgodi1taW4pLyhtYXgtbWluKSkqMTAwK1wiJVwiO31cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb25zdCBTTD17fTtcclxuICBTTC5zMD1jcmVhdGVTbGlkZXIoXCJJbml0aWFsIFN1c2NlcHRpYmxlXCIsNTAsMzAwLDEsMjAwLFwiIzNiODJmNlwiLFwiYmx1ZVwiKTtcclxuICBTTC5pMD1jcmVhdGVTbGlkZXIoXCJJbml0aWFsIEluZmVjdGVkXCIsMSw1LDEsMSxcIiNkYzI2MjZcIixcInJlZFwiKTtcclxuICBTTC5iZXRhPWNyZWF0ZVNsaWRlcihcIlxcdTAzQjIgKGluZmVjdCBwZXIgZGF5KVwiLDAuNSw1LDAuNSwyLFwiI2Q5NzcwNlwiLFwiYW1iZXJcIik7XHJcbiAgU0wuZ2FtbWE9Y3JlYXRlU2xpZGVyKFwiXFx1MDNCMyAocmVjb3ZlcnkgcHJvYi9kYXkpXCIsMC4wNSwwLjgwLDAuMDUsMC4yMCxcIiMxNmEzNGFcIixcImdyZWVuXCIpO1xyXG5cclxuICBjb25zdCByMT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHIxLnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OmZsZXg7Z2FwOjI0cHg7d2lkdGg6MTAwJTttYXJnaW4tYm90dG9tOjEwcHg7XCI7XHJcbiAgcjEuYXBwZW5kQ2hpbGQoU0wuczAuZWwpO3IxLmFwcGVuZENoaWxkKFNMLmkwLmVsKTtcclxuICB3cmFwcGVyLmFwcGVuZENoaWxkKHIxKTtcclxuICBjb25zdCByMj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHIyLnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OmZsZXg7Z2FwOjI0cHg7d2lkdGg6MTAwJTttYXJnaW4tYm90dG9tOjEycHg7XCI7XHJcbiAgcjIuYXBwZW5kQ2hpbGQoU0wuYmV0YS5lbCk7cjIuYXBwZW5kQ2hpbGQoU0wuZ2FtbWEuZWwpO1xyXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQocjIpO1xyXG5cclxuICBjb25zdCByMz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHIzLnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OmZsZXg7Z2FwOjEwcHg7d2lkdGg6MTAwJTttYXJnaW4tYm90dG9tOjE0cHg7cGFkZGluZy1ib3R0b206MTRweDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZTJlOGYwO1wiO1xyXG4gIGNvbnN0IGJ0blN0ZXA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidG5TdGVwLmNsYXNzTmFtZT1cInNpci1idG4gc2lyLWJ0bi1zdGVwXCI7YnRuU3RlcC50ZXh0Q29udGVudD1cIuKWtiAgU3RlcFwiO1xyXG4gIGNvbnN0IGJ0bkF1dG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidG5BdXRvLmNsYXNzTmFtZT1cInNpci1idG4gc2lyLWJ0bi1hdXRvXCI7YnRuQXV0by50ZXh0Q29udGVudD1cIuKPqSAgQXV0b1wiO1xyXG4gIGNvbnN0IGJ0blJlc2V0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnRuUmVzZXQuY2xhc3NOYW1lPVwic2lyLWJ0biBzaXItYnRuLXJlc2V0XCI7YnRuUmVzZXQudGV4dENvbnRlbnQ9XCLihrogIFJlc2V0XCI7XHJcbiAgcjMuYXBwZW5kQ2hpbGQoYnRuU3RlcCk7cjMuYXBwZW5kQ2hpbGQoYnRuQXV0byk7cjMuYXBwZW5kQ2hpbGQoYnRuUmVzZXQpO1xyXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQocjMpO1xyXG5cclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICAvLyAzLiBDT01QQVJUTUVOVCBCT1hFU1xyXG4gIC8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gIGNvbnN0IGJveFJvdz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGJveFJvdy5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTpmbGV4O2dhcDoxMHB4O3dpZHRoOjEwMCU7bWFyZ2luLWJvdHRvbToxNHB4O1wiO1xyXG5cclxuICBmdW5jdGlvbiBtYWtlQm94KGxhYmVsLGJvcmRlckNvbG9yLGJnQ29sb3IsY291bnRDb2xvcil7XHJcbiAgICBjb25zdCBib3g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGJveC5zdHlsZS5jc3NUZXh0PWBmbGV4OjE7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjoycHggc29saWQgJHtib3JkZXJDb2xvcn07YmFja2dyb3VuZDoke2JnQ29sb3J9O3BhZGRpbmc6MTBweDttaW4taGVpZ2h0OjEyMHB4O292ZXJmbG93OmhpZGRlbjtgO1xyXG4gICAgY29uc3QgaGRyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBoZHIuc3R5bGUuY3NzVGV4dD1cImRpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpiYXNlbGluZTttYXJnaW4tYm90dG9tOjhweDtcIjtcclxuICAgIGNvbnN0IGxibD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIGxibC5zdHlsZS5jc3NUZXh0PWBmb250LXNpemU6MTJweDtmb250LXdlaWdodDo3MDA7Y29sb3I6JHtjb3VudENvbG9yfTt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MC41cHg7YDtcclxuICAgIGxibC50ZXh0Q29udGVudD1sYWJlbDtcclxuICAgIGNvbnN0IGNudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIGNudC5zdHlsZS5jc3NUZXh0PWBmb250LXNpemU6MjBweDtmb250LXdlaWdodDo4MDA7Y29sb3I6JHtjb3VudENvbG9yfTtmb250LWZhbWlseTpcIlNGIE1vbm9cIixtb25vc3BhY2U7YDtcclxuICAgIGNudC50ZXh0Q29udGVudD1cIjBcIjtcclxuICAgIGhkci5hcHBlbmRDaGlsZChsYmwpO2hkci5hcHBlbmRDaGlsZChjbnQpO2JveC5hcHBlbmRDaGlsZChoZHIpO1xyXG4gICAgY29uc3QgZ3JpZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZ3JpZC5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2dhcDozcHg7YWxpZ24tY29udGVudDpmbGV4LXN0YXJ0O1wiO1xyXG4gICAgYm94LmFwcGVuZENoaWxkKGdyaWQpO1xyXG4gICAgcmV0dXJue2JveCxjbnQsZ3JpZH07XHJcbiAgfVxyXG5cclxuICBjb25zdCBib3hTPW1ha2VCb3goXCJTdXNjZXB0aWJsZVwiLFwiI2JmZGJmZVwiLFwiI2VmZjZmZlwiLFwiIzFkNGVkOFwiKTtcclxuICBjb25zdCBib3hJPW1ha2VCb3goXCJJbmZlY3RlZFwiLFwiI2ZlY2FjYVwiLFwiI2ZlZjJmMlwiLFwiI2RjMjYyNlwiKTtcclxuICBjb25zdCBib3hSPW1ha2VCb3goXCJSZWNvdmVyZWRcIixcIiNiYmY3ZDBcIixcIiNmMGZkZjRcIixcIiMxNmEzNGFcIik7XHJcbiAgYm94Um93LmFwcGVuZENoaWxkKGJveFMuYm94KTtib3hSb3cuYXBwZW5kQ2hpbGQoYm94SS5ib3gpO2JveFJvdy5hcHBlbmRDaGlsZChib3hSLmJveCk7XHJcbiAgd3JhcHBlci5hcHBlbmRDaGlsZChib3hSb3cpO1xyXG5cclxuICBjb25zdCBkYXlMYWJlbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGRheUxhYmVsLnN0eWxlLmNzc1RleHQ9YHdpZHRoOjEwMCU7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1zaXplOjE0cHg7Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMzMzQxNTU7bWFyZ2luLWJvdHRvbToxMHB4O2ZvbnQtZmFtaWx5OlwiU0YgTW9ub1wiLG1vbm9zcGFjZTtgO1xyXG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZGF5TGFiZWwpO1xyXG5cclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICAvLyA0LiBISVNUT0dSQU0gU1ZHXHJcbiAgLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAgY29uc3QgTlM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiO1xyXG4gIGNvbnN0IENXPTc2MCxDSD0zMDA7XHJcbiAgY29uc3QgY21nPXt0OjIwLHI6MjAsYjo0OCxsOjU2fTtcclxuICBjb25zdCBjY3c9Q1ctY21nLmwtY21nLnIsY2NoPUNILWNtZy50LWNtZy5iO1xyXG5cclxuICBjb25zdCBzdmc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKE5TLFwic3ZnXCIpO1xyXG4gIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsYDAgMCAke0NXfSAke0NIfWApO1xyXG4gIHN2Zy5zdHlsZS5jc3NUZXh0PWB3aWR0aDoxMDAlO21heC13aWR0aDoke0NXfXB4O2JhY2tncm91bmQ6I2ZhZmJmYztib3JkZXItcmFkaXVzOjEwcHg7Ym9yZGVyOjFweCBzb2xpZCAjZTJlOGYwO2A7XHJcblxyXG4gIGZ1bmN0aW9uIGVsKHRhZyxhKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhOUyx0YWcpO2lmKGEpZm9yKGNvbnN0W2ssdl1vZiBPYmplY3QuZW50cmllcyhhKSllLnNldEF0dHJpYnV0ZShrLHYpO3JldHVybiBlO31cclxuXHJcbiAgY29uc3QgZ3JpZExpbmVzPVtdO1xyXG4gIGZvcihsZXQgaT0wO2k8PTQ7aSsrKXtjb25zdCBsPWVsKFwibGluZVwiLHtzdHJva2U6XCIjZTJlOGYwXCIsXCJzdHJva2Utd2lkdGhcIjpcIjAuN1wifSk7c3ZnLmFwcGVuZENoaWxkKGwpO2dyaWRMaW5lcy5wdXNoKGwpO31cclxuICBjb25zdCB5TGFiZWxzSD1bXTtcclxuICBmb3IobGV0IGk9MDtpPD00O2krKyl7Y29uc3QgdD1lbChcInRleHRcIix7XCJ0ZXh0LWFuY2hvclwiOlwiZW5kXCIsZmlsbDpcIiM5NGEzYjhcIixcImZvbnQtc2l6ZVwiOlwiMTBcIixcImZvbnQtZmFtaWx5XCI6XCInU0YgTW9ubycsbW9ub3NwYWNlXCJ9KTtzdmcuYXBwZW5kQ2hpbGQodCk7eUxhYmVsc0gucHVzaCh0KTt9XHJcblxyXG4gIGNvbnN0IEJQT09MPTYwO1xyXG4gIGNvbnN0IGhCYXJzPVtdO1xyXG4gIGZvcihsZXQgaT0wO2k8QlBPT0w7aSsrKXtcclxuICAgIGNvbnN0IHI9ZWwoXCJyZWN0XCIse3J4OlwiMlwiLGZpbGw6XCIjMTZhMzRhXCIsc3Ryb2tlOlwiIzE1ODAzZFwiLFwic3Ryb2tlLXdpZHRoXCI6XCIwLjVcIixvcGFjaXR5OlwiMC43XCJ9KTtcclxuICAgIHIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtzdmcuYXBwZW5kQ2hpbGQocik7aEJhcnMucHVzaChyKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGV4cFBhdGg9ZWwoXCJwYXRoXCIse2ZpbGw6XCJub25lXCIsc3Ryb2tlOlwiI2RjMjYyNlwiLFwic3Ryb2tlLXdpZHRoXCI6XCIyLjVcIixvcGFjaXR5OlwiMC44NVwifSk7XHJcbiAgc3ZnLmFwcGVuZENoaWxkKGV4cFBhdGgpO1xyXG5cclxuICBjb25zdCB4QXg9ZWwoXCJsaW5lXCIse3N0cm9rZTpcIiM5NGEzYjhcIn0pO3N2Zy5hcHBlbmRDaGlsZCh4QXgpO1xyXG4gIGNvbnN0IHhUaWNrUG9vbD1bXTtcclxuICBmb3IobGV0IGk9MDtpPDIwO2krKyl7XHJcbiAgICBjb25zdCBsbj1lbChcImxpbmVcIix7c3Ryb2tlOlwiIzk0YTNiOFwiLHkyOlwiNVwifSk7bG4uc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtzdmcuYXBwZW5kQ2hpbGQobG4pO1xyXG4gICAgY29uc3QgdD1lbChcInRleHRcIix7XCJ0ZXh0LWFuY2hvclwiOlwibWlkZGxlXCIsZmlsbDpcIiM2NDc0OGJcIixcImZvbnQtc2l6ZVwiOlwiMTFcIixcImZvbnQtZmFtaWx5XCI6XCInU0YgTW9ubycsbW9ub3NwYWNlXCIsZHk6XCIxNlwifSk7dC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3N2Zy5hcHBlbmRDaGlsZCh0KTtcclxuICAgIHhUaWNrUG9vbC5wdXNoKHtsbix0fSk7XHJcbiAgfVxyXG4gIHN2Zy5hcHBlbmRDaGlsZChlbChcImxpbmVcIix7eDE6U3RyaW5nKGNtZy5sKSx4MjpTdHJpbmcoY21nLmwpLHkxOlN0cmluZyhjbWcudCkseTI6U3RyaW5nKGNtZy50K2NjaCksc3Ryb2tlOlwiIzk0YTNiOFwifSkpO1xyXG5cclxuICBjb25zdCB4TGJsPWVsKFwidGV4dFwiLHtcInRleHQtYW5jaG9yXCI6XCJtaWRkbGVcIixmaWxsOlwiIzY0NzQ4YlwiLFwiZm9udC1zaXplXCI6XCIxMlwiLHk6U3RyaW5nKENILTQpfSk7XHJcbiAgeExibC50ZXh0Q29udGVudD1cIkxlbmd0aCBvZiBTdGF5IChkYXlzKVwiO3N2Zy5hcHBlbmRDaGlsZCh4TGJsKTtcclxuICBjb25zdCB5TGJsPWVsKFwidGV4dFwiLHtcInRleHQtYW5jaG9yXCI6XCJtaWRkbGVcIixmaWxsOlwiIzY0NzQ4YlwiLFwiZm9udC1zaXplXCI6XCIxMlwiLHg6XCIxNFwiLHk6U3RyaW5nKGNtZy50K2NjaC8yKSx0cmFuc2Zvcm06YHJvdGF0ZSgtOTAsMTQsJHtjbWcudCtjY2gvMn0pYH0pO1xyXG4gIHlMYmwudGV4dENvbnRlbnQ9XCJQcm9wb3J0aW9uXCI7c3ZnLmFwcGVuZENoaWxkKHlMYmwpO1xyXG5cclxuICBjb25zdCBsZWdSMT1lbChcInJlY3RcIix7eDpcIjU4MFwiLHk6XCI4XCIsd2lkdGg6XCIxNFwiLGhlaWdodDpcIjEwXCIscng6XCIyXCIsZmlsbDpcIiMxNmEzNGFcIixvcGFjaXR5OlwiMC43XCJ9KTtcclxuICBjb25zdCBsZWdUMT1lbChcInRleHRcIix7eDpcIjYwMFwiLHk6XCIxN1wiLGZpbGw6XCIjNDc1NTY5XCIsXCJmb250LXNpemVcIjpcIjExXCJ9KTtsZWdUMS50ZXh0Q29udGVudD1cIk9ic2VydmVkIExPU1wiO1xyXG4gIGNvbnN0IGxlZ0wyPWVsKFwibGluZVwiLHt4MTpcIjU4MFwiLHgyOlwiNTk0XCIseTE6XCIzMFwiLHkyOlwiMzBcIixzdHJva2U6XCIjZGMyNjI2XCIsXCJzdHJva2Utd2lkdGhcIjpcIjIuNVwifSk7XHJcbiAgY29uc3QgbGVnVDI9ZWwoXCJ0ZXh0XCIse3g6XCI2MDBcIix5OlwiMzRcIixmaWxsOlwiIzQ3NTU2OVwiLFwiZm9udC1zaXplXCI6XCIxMVwifSk7bGVnVDIudGV4dENvbnRlbnQ9XCJHZW9tZXRyaWMoXFx1MDNCMylcIjtcclxuICBzdmcuYXBwZW5kQ2hpbGQobGVnUjEpO3N2Zy5hcHBlbmRDaGlsZChsZWdUMSk7c3ZnLmFwcGVuZENoaWxkKGxlZ0wyKTtzdmcuYXBwZW5kQ2hpbGQobGVnVDIpO1xyXG5cclxuICB3cmFwcGVyLmFwcGVuZENoaWxkKHN2Zyk7XHJcblxyXG4gIC8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gIC8vIDUuIEZJWEVEIENIQVJUIFNFVFVQIChheGVzICsgdGhlb3JldGljYWwgbGluZSlcclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICBsZXQgY2hhcnRIaVg9MSxjaGFydE1heFA9MC4xO1xyXG4gIGxldCBjaGFydFN4LGNoYXJ0U3ksY2hhcnRCYXJXLGNoYXJ0QmFzZWxpbmU7XHJcblxyXG4gIGZ1bmN0aW9uIGluaXRDaGFydCgpe1xyXG4gICAgY29uc3QgZ2FtbWE9U0wuZ2FtbWEudmFsKCk7XHJcblxyXG4gICAgLy8gWCByYW5nZTogc3RhcnQgYXQgMSwgZ28gdW50aWwgZ2VvbWV0cmljIFBNRiA8IDAuNSVcclxuICAgIGNoYXJ0SGlYPU1hdGgubWF4KDEwLE1hdGguY2VpbCgxK01hdGgubG9nKDAuMDA1L01hdGgubWF4KGdhbW1hLDAuMDEpKS9NYXRoLmxvZyhNYXRoLm1heCgxLWdhbW1hLDAuMDEpKSkpO1xyXG4gICAgY2hhcnRIaVg9TWF0aC5taW4oY2hhcnRIaVgsNjApO1xyXG5cclxuICAgIC8vIFkgcmFuZ2U6IHBlYWsgYXQgaz0xIGlzIGdhbW1hXHJcbiAgICBjaGFydE1heFA9Z2FtbWEqMS4yNTtcclxuICAgIGlmKGNoYXJ0TWF4UDwwLjA1KWNoYXJ0TWF4UD0wLjA1O1xyXG5cclxuICAgIC8vIFggYXhpcyBzdGFydHMgYXQgMSAobm90IDApXHJcbiAgICBjaGFydFN4PXg9PmNtZy5sKygoeC0xKS8oY2hhcnRIaVgtMSkpKmNjdztcclxuICAgIGNoYXJ0U3k9eT0+Y21nLnQrY2NoLSh5L2NoYXJ0TWF4UCkqY2NoO1xyXG4gICAgY2hhcnRCYXJXPU1hdGgubWF4KDIsTWF0aC5taW4oMjQsY2N3LyhjaGFydEhpWC0xKSowLjcpKTtcclxuICAgIGNoYXJ0QmFzZWxpbmU9Y2hhcnRTeSgwKTtcclxuXHJcbiAgICAvLyBHcmlkXHJcbiAgICBmb3IobGV0IGk9MDtpPD00O2krKyl7XHJcbiAgICAgIGNvbnN0IHY9KGNoYXJ0TWF4UC80KSppLHl5PWNoYXJ0U3kodik7XHJcbiAgICAgIGdyaWRMaW5lc1tpXS5zZXRBdHRyaWJ1dGUoXCJ4MVwiLGNtZy5sKTtncmlkTGluZXNbaV0uc2V0QXR0cmlidXRlKFwieDJcIixDVy1jbWcucik7XHJcbiAgICAgIGdyaWRMaW5lc1tpXS5zZXRBdHRyaWJ1dGUoXCJ5MVwiLHl5KTtncmlkTGluZXNbaV0uc2V0QXR0cmlidXRlKFwieTJcIix5eSk7XHJcbiAgICAgIHlMYWJlbHNIW2ldLnNldEF0dHJpYnV0ZShcInhcIixjbWcubC04KTt5TGFiZWxzSFtpXS5zZXRBdHRyaWJ1dGUoXCJ5XCIseXkrNCk7XHJcbiAgICAgIHlMYWJlbHNIW2ldLnRleHRDb250ZW50PXYudG9GaXhlZCh2PDAuMDE/MzoyKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBYIGF4aXNcclxuICAgIHhBeC5zZXRBdHRyaWJ1dGUoXCJ4MVwiLGNtZy5sKTt4QXguc2V0QXR0cmlidXRlKFwieDJcIixDVy1jbWcucik7XHJcbiAgICB4QXguc2V0QXR0cmlidXRlKFwieTFcIixjaGFydEJhc2VsaW5lKTt4QXguc2V0QXR0cmlidXRlKFwieTJcIixjaGFydEJhc2VsaW5lKTtcclxuICAgIHhMYmwuc2V0QXR0cmlidXRlKFwieFwiLGNtZy5sK2Njdy8yKTtcclxuXHJcbiAgICBjb25zdCB0cz1jaGFydEhpWD40MD81OmNoYXJ0SGlYPjIwPzI6MTtcclxuICAgIGxldCB0aT0wO1xyXG4gICAgZm9yKGxldCB4PTE7eDw9Y2hhcnRIaVgmJnRpPDIwO3grPXRzKXtcclxuICAgICAgY29uc3QgeHg9Y2hhcnRTeCh4KTtcclxuICAgICAgeFRpY2tQb29sW3RpXS5sbi5zZXRBdHRyaWJ1dGUoXCJ4MVwiLHh4KTt4VGlja1Bvb2xbdGldLmxuLnNldEF0dHJpYnV0ZShcIngyXCIseHgpO1xyXG4gICAgICB4VGlja1Bvb2xbdGldLmxuLnNldEF0dHJpYnV0ZShcInkxXCIsY2hhcnRCYXNlbGluZSk7eFRpY2tQb29sW3RpXS5sbi5zZXRBdHRyaWJ1dGUoXCJ5MlwiLGNoYXJ0QmFzZWxpbmUrNSk7XHJcbiAgICAgIHhUaWNrUG9vbFt0aV0ubG4uc3R5bGUuZGlzcGxheT1cIlwiO1xyXG4gICAgICB4VGlja1Bvb2xbdGldLnQuc2V0QXR0cmlidXRlKFwieFwiLHh4KTt4VGlja1Bvb2xbdGldLnQuc2V0QXR0cmlidXRlKFwieVwiLGNoYXJ0QmFzZWxpbmUrNSk7XHJcbiAgICAgIHhUaWNrUG9vbFt0aV0udC50ZXh0Q29udGVudD14O3hUaWNrUG9vbFt0aV0udC5zdHlsZS5kaXNwbGF5PVwiXCI7XHJcbiAgICAgIHRpKys7XHJcbiAgICB9XHJcbiAgICBmb3IoO3RpPDIwO3RpKyspe3hUaWNrUG9vbFt0aV0ubG4uc3R5bGUuZGlzcGxheT1cIm5vbmVcIjt4VGlja1Bvb2xbdGldLnQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjt9XHJcblxyXG4gICAgLy8gVGhlb3JldGljYWwgZ2VvbWV0cmljIGN1cnZlIHN0YXJ0aW5nIGF0IGs9MVxyXG4gICAgLy8gUChYPWspID0gZ2FtbWEgKiAoMS1nYW1tYSleKGstMSksIGsgPSAxLCAyLCAuLi5cclxuICAgIGNvbnN0IHE9MS1nYW1tYTtcclxuICAgIGxldCBkPVwiXCI7XHJcbiAgICBmb3IobGV0IGs9MTtrPD1jaGFydEhpWDtrKz0wLjIpe1xyXG4gICAgICBjb25zdCBmeD1nYW1tYSpNYXRoLnBvdyhxLGstMSk7XHJcbiAgICAgIGNvbnN0IHB4PWNoYXJ0U3goaykscHk9Y2hhcnRTeShmeCk7XHJcbiAgICAgIGQrPShrPT09MT9cIk1cIjpcIkxcIikrcHgudG9GaXhlZCgxKStcIixcIitweS50b0ZpeGVkKDEpO1xyXG4gICAgfVxyXG4gICAgZXhwUGF0aC5zZXRBdHRyaWJ1dGUoXCJkXCIsZCk7XHJcblxyXG4gICAgZm9yKGxldCBpPTA7aTxCUE9PTDtpKyspaEJhcnNbaV0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcclxuICB9XHJcblxyXG4gIC8vIOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxyXG4gIC8vIDYuIFNJTVVMQVRJT04gU1RBVEVcclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICBsZXQgU19jb3VudD0wLElfbGlzdD1bXSxSX2xpc3Q9W10sZGF5PTAsYXV0b0lkPTAscnVubmluZz1mYWxzZTtcclxuXHJcbiAgbGV0IHJuZ1N0YXRlPTEyMzQ1O1xyXG4gIGZ1bmN0aW9uIHJuZygpe3JuZ1N0YXRlPShybmdTdGF0ZSoxNjgwNyklMjE0NzQ4MzY0NztyZXR1cm4ocm5nU3RhdGUtMSkvMjE0NzQ4MzY0Njt9XHJcblxyXG4gIGZ1bmN0aW9uIGluaXRTaW0oKXtcclxuICAgIGNsZWFySW50ZXJ2YWwoYXV0b0lkKTtydW5uaW5nPWZhbHNlO1xyXG4gICAgYnRuQXV0by50ZXh0Q29udGVudD1cIuKPqSAgQXV0b1wiO1xyXG4gICAgcm5nU3RhdGU9MTIzNDUrKERhdGUubm93KCkmMHhGRkZGKTtcclxuICAgIFNfY291bnQ9U0wuczAudmFsKCk7XHJcbiAgICBJX2xpc3Q9W107XHJcbiAgICBmb3IobGV0IGk9MDtpPFNMLmkwLnZhbCgpO2krKylJX2xpc3QucHVzaCh7ZGF5czowfSk7XHJcbiAgICBSX2xpc3Q9W107ZGF5PTA7XHJcbiAgICBpbml0Q2hhcnQoKTtcclxuICAgIGRyYXdBbGwoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN0ZXBTaW0oKXtcclxuICAgIGlmKElfbGlzdC5sZW5ndGg9PT0wJiZkYXk+MClyZXR1cm47XHJcbiAgICBjb25zdCBiZXRhPVNMLmJldGEudmFsKCksZ2FtbWE9U0wuZ2FtbWEudmFsKCk7XHJcblxyXG4gICAgbGV0IG5ld0luZj1NYXRoLm1pbihTX2NvdW50LE1hdGguZmxvb3IoYmV0YSpJX2xpc3QubGVuZ3RoKSk7XHJcbiAgICBTX2NvdW50LT1uZXdJbmY7XHJcbiAgICBjb25zdCBuZXdJPVtdO1xyXG4gICAgZm9yKGxldCBpPTA7aTxuZXdJbmY7aSsrKW5ld0kucHVzaCh7ZGF5czowfSk7XHJcblxyXG4gICAgY29uc3Qgc3RheUk9W107XHJcbiAgICBmb3IobGV0IGk9MDtpPElfbGlzdC5sZW5ndGg7aSsrKXtcclxuICAgICAgSV9saXN0W2ldLmRheXMrKztcclxuICAgICAgaWYocm5nKCk8Z2FtbWEpe1JfbGlzdC5wdXNoKHtsb3M6SV9saXN0W2ldLmRheXN9KTt9XHJcbiAgICAgIGVsc2V7c3RheUkucHVzaChJX2xpc3RbaV0pO31cclxuICAgIH1cclxuXHJcbiAgICBJX2xpc3Q9c3RheUkuY29uY2F0KG5ld0kpO1xyXG4gICAgZGF5Kys7XHJcbiAgICBkcmF3QWxsKCk7XHJcbiAgfVxyXG5cclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICAvLyA3LiBSRU5ERVIgQk9YRVNcclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICBmdW5jdGlvbiBwZXJzb25Eb3QoY29sb3IsdGV4dCl7XHJcbiAgICBjb25zdCBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBkLnN0eWxlLmNzc1RleHQ9YFxyXG4gICAgICB3aWR0aDoke3RleHQ/XCJhdXRvXCI6XCIxMHB4XCJ9O2hlaWdodDoke3RleHQ/XCJhdXRvXCI6XCIxMHB4XCJ9O21pbi13aWR0aDoxMHB4O1xyXG4gICAgICBib3JkZXItcmFkaXVzOiR7dGV4dD9cIjZweFwiOlwiNTAlXCJ9O2JhY2tncm91bmQ6JHtjb2xvcn07XHJcbiAgICAgICR7dGV4dD9cInBhZGRpbmc6MXB4IDRweDtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojZmZmO2ZvbnQtZmFtaWx5OidTRiBNb25vJyxtb25vc3BhY2U7dGV4dC1hbGlnbjpjZW50ZXI7XCI6XCJcIn1cclxuICAgIGA7XHJcbiAgICBpZih0ZXh0KWQudGV4dENvbnRlbnQ9dGV4dDtcclxuICAgIHJldHVybiBkO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZHJhd0JveGVzKCl7XHJcbiAgICBib3hTLmNudC50ZXh0Q29udGVudD1TX2NvdW50O1xyXG4gICAgYm94SS5jbnQudGV4dENvbnRlbnQ9SV9saXN0Lmxlbmd0aDtcclxuICAgIGJveFIuY250LnRleHRDb250ZW50PVJfbGlzdC5sZW5ndGg7XHJcblxyXG4gICAgYm94Uy5ncmlkLmlubmVySFRNTD1cIlwiO1xyXG4gICAgY29uc3Qgc1Nob3c9TWF0aC5taW4oU19jb3VudCwxMDApO1xyXG4gICAgZm9yKGxldCBpPTA7aTxzU2hvdztpKyspYm94Uy5ncmlkLmFwcGVuZENoaWxkKHBlcnNvbkRvdChcIiMzYjgyZjZcIikpO1xyXG4gICAgaWYoU19jb3VudD4xMDApe2NvbnN0IG09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7bS5zdHlsZS5jc3NUZXh0PVwiZm9udC1zaXplOjEwcHg7Y29sb3I6IzY0NzQ4YjttYXJnaW4tbGVmdDo0cHg7XCI7bS50ZXh0Q29udGVudD1cIitcIisoU19jb3VudC0xMDApO2JveFMuZ3JpZC5hcHBlbmRDaGlsZChtKTt9XHJcblxyXG4gICAgYm94SS5ncmlkLmlubmVySFRNTD1cIlwiO1xyXG4gICAgY29uc3QgaVNob3c9TWF0aC5taW4oSV9saXN0Lmxlbmd0aCw2MCk7XHJcbiAgICBmb3IobGV0IGk9MDtpPGlTaG93O2krKylib3hJLmdyaWQuYXBwZW5kQ2hpbGQocGVyc29uRG90KFwiI2RjMjYyNlwiLFN0cmluZyhJX2xpc3RbaV0uZGF5cykpKTtcclxuICAgIGlmKElfbGlzdC5sZW5ndGg+NjApe2NvbnN0IG09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7bS5zdHlsZS5jc3NUZXh0PVwiZm9udC1zaXplOjEwcHg7Y29sb3I6IzY0NzQ4YjttYXJnaW4tbGVmdDo0cHg7XCI7bS50ZXh0Q29udGVudD1cIitcIisoSV9saXN0Lmxlbmd0aC02MCk7Ym94SS5ncmlkLmFwcGVuZENoaWxkKG0pO31cclxuXHJcbiAgICBib3hSLmdyaWQuaW5uZXJIVE1MPVwiXCI7XHJcbiAgICBjb25zdCByU2hvdz1NYXRoLm1pbihSX2xpc3QubGVuZ3RoLDYwKTtcclxuICAgIGZvcihsZXQgaT1SX2xpc3QubGVuZ3RoLTE7aT49TWF0aC5tYXgoMCxSX2xpc3QubGVuZ3RoLXJTaG93KTtpLS0pXHJcbiAgICAgIGJveFIuZ3JpZC5hcHBlbmRDaGlsZChwZXJzb25Eb3QoXCIjMTZhMzRhXCIsU3RyaW5nKFJfbGlzdFtpXS5sb3MpKSk7XHJcbiAgICBpZihSX2xpc3QubGVuZ3RoPjYwKXtjb25zdCBtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO20uc3R5bGUuY3NzVGV4dD1cImZvbnQtc2l6ZToxMHB4O2NvbG9yOiM2NDc0OGI7bWFyZ2luLWxlZnQ6NHB4O1wiO20udGV4dENvbnRlbnQ9XCIrXCIrKFJfbGlzdC5sZW5ndGgtNjApO2JveFIuZ3JpZC5hcHBlbmRDaGlsZChtKTt9XHJcblxyXG4gICAgZGF5TGFiZWwudGV4dENvbnRlbnQ9XCJEYXkgXCIrZGF5KyhJX2xpc3QubGVuZ3RoPT09MCYmZGF5PjA/XCIg4oCUIEVwaWRlbWljIGVuZGVkXCI6XCJcIik7XHJcbiAgfVxyXG5cclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICAvLyA4LiBISVNUT0dSQU0gQkFSUyBPTkxZXHJcbiAgLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAgZnVuY3Rpb24gZHJhd0hpc3RCYXJzKCl7XHJcbiAgICBpZihSX2xpc3QubGVuZ3RoPT09MCl7XHJcbiAgICAgIGZvcihsZXQgaT0wO2k8QlBPT0w7aSsrKWhCYXJzW2ldLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsb3NBcnI9Ul9saXN0Lm1hcChyPT5yLmxvcyk7XHJcbiAgICBjb25zdCBtYXhMT1M9TWF0aC5tYXgoLi4ubG9zQXJyKTtcclxuICAgIGNvbnN0IGJpbnM9bmV3IEludDMyQXJyYXkoTWF0aC5taW4obWF4TE9TKzEsQlBPT0wpKTtcclxuICAgIGZvcihjb25zdCB2IG9mIGxvc0FycilpZih2PGJpbnMubGVuZ3RoKWJpbnNbdl0rKztcclxuXHJcbiAgICBjb25zdCB0b3RhbD1SX2xpc3QubGVuZ3RoO1xyXG5cclxuICAgIGZvcihsZXQgaT0wO2k8QlBPT0w7aSsrKXtcclxuICAgICAgaWYoaT49MSYmaTxiaW5zLmxlbmd0aCYmYmluc1tpXT4wKXtcclxuICAgICAgICBjb25zdCBwcm9wPWJpbnNbaV0vdG90YWw7XHJcbiAgICAgICAgY29uc3QgYng9Y2hhcnRTeChpKS1jaGFydEJhclcvMjtcclxuICAgICAgICBjb25zdCBieT1jaGFydFN5KHByb3ApO1xyXG4gICAgICAgIGhCYXJzW2ldLnNldEF0dHJpYnV0ZShcInhcIixieCk7XHJcbiAgICAgICAgaEJhcnNbaV0uc2V0QXR0cmlidXRlKFwieVwiLGJ5KTtcclxuICAgICAgICBoQmFyc1tpXS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGNoYXJ0QmFyVyk7XHJcbiAgICAgICAgaEJhcnNbaV0uc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsTWF0aC5tYXgoMCxjaGFydEJhc2VsaW5lLWJ5KSk7XHJcbiAgICAgICAgaEJhcnNbaV0uc3R5bGUuZGlzcGxheT1cIlwiO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICBoQmFyc1tpXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkcmF3QWxsKCl7ZHJhd0JveGVzKCk7ZHJhd0hpc3RCYXJzKCk7fVxyXG5cclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICAvLyA5LiBCVVRUT05TXHJcbiAgLy8g4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXHJcbiAgZnVuY3Rpb24gb25TdGVwKCl7c3RlcFNpbSgpO31cclxuICBmdW5jdGlvbiBvbkF1dG8oKXtcclxuICAgIGlmKHJ1bm5pbmcpe2NsZWFySW50ZXJ2YWwoYXV0b0lkKTtydW5uaW5nPWZhbHNlO2J0bkF1dG8udGV4dENvbnRlbnQ9XCLij6kgIEF1dG9cIjtyZXR1cm47fVxyXG4gICAgcnVubmluZz10cnVlO2J0bkF1dG8udGV4dENvbnRlbnQ9XCLij7ggIFN0b3BcIjtcclxuICAgIGF1dG9JZD1zZXRJbnRlcnZhbCgoKT0+e1xyXG4gICAgICBpZihJX2xpc3QubGVuZ3RoPT09MCYmZGF5PjApe2NsZWFySW50ZXJ2YWwoYXV0b0lkKTtydW5uaW5nPWZhbHNlO2J0bkF1dG8udGV4dENvbnRlbnQ9XCLij6kgIEF1dG9cIjtyZXR1cm47fVxyXG4gICAgICBzdGVwU2ltKCk7XHJcbiAgICB9LDIwMCk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIG9uUmVzZXQoKXtpbml0U2ltKCk7fVxyXG5cclxuICBidG5TdGVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLG9uU3RlcCk7XHJcbiAgYnRuQXV0by5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixvbkF1dG8pO1xyXG4gIGJ0blJlc2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLG9uUmVzZXQpO1xyXG5cclxuICBmdW5jdGlvbiBvblBhcmFtKCl7U0wuczAuc3luYygpO1NMLmkwLnN5bmMoKTtTTC5iZXRhLnN5bmMoKTtTTC5nYW1tYS5zeW5jKCk7aWYoIXJ1bm5pbmcpaW5pdFNpbSgpO31cclxuICBTTC5zMC5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIixvblBhcmFtKTtcclxuICBTTC5pMC5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIixvblBhcmFtKTtcclxuICBTTC5iZXRhLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLG9uUGFyYW0pO1xyXG4gIFNMLmdhbW1hLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLG9uUGFyYW0pO1xyXG5cclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICAvLyAxMC4gSU5JVCAmIENMRUFOVVBcclxuICAvLyDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcclxuICBpbml0U2ltKCk7XHJcblxyXG4gIGludmFsaWRhdGlvbi50aGVuKCgpPT57XHJcbiAgICBjbGVhckludGVydmFsKGF1dG9JZCk7XHJcbiAgICBidG5TdGVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLG9uU3RlcCk7XHJcbiAgICBidG5BdXRvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLG9uQXV0byk7XHJcbiAgICBidG5SZXNldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIixvblJlc2V0KTtcclxuICAgIFNMLnMwLmlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLG9uUGFyYW0pO1xyXG4gICAgU0wuaTAuaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsb25QYXJhbSk7XHJcbiAgICBTTC5iZXRhLmlucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLG9uUGFyYW0pO1xyXG4gICAgU0wuZ2FtbWEuaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsb25QYXJhbSk7XHJcbiAgICBJX2xpc3Q9W107Ul9saXN0PVtdO1xyXG4gIH0pO1xyXG5cclxuICB3cmFwcGVyLnZhbHVlPXt9O1xyXG4gIHJldHVybiB3cmFwcGVyO1xyXG59KSgpXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnc2lyX3NpbScpIn1dfQ==
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
<script>
  function loadGiscus() {
    // Function to get the theme based on body class
    const getTheme = () => {
      let baseTheme = document.getElementById('giscus-base-theme').value;
      let altTheme = document.getElementById('giscus-alt-theme').value;
      return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
    };
    const script = document.createElement("script");
    script.src = "https://giscus.app/client.js";
    script.async = true;
    script.dataset.repo = "thinhong/s4bvn";
    script.dataset.repoId = "R_kgDOQtVYcQ";
    script.dataset.category = "General";
    script.dataset.categoryId = "DIC_kwDOQtVYcc4C00o0";
    script.dataset.mapping = "title";
    script.dataset.reactionsEnabled = "1";
    script.dataset.emitMetadata = "0";
    script.dataset.inputPosition = "top";
    script.dataset.theme = getTheme();
    script.dataset.lang = "en";
    script.crossOrigin = "anonymous";
    // Append the script to the desired div instead of at the end of the body
    document.getElementById("quarto-content").appendChild(script);
  }
  loadGiscus();
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./distr-lnorm.html" class="pagination-link" aria-label="Phân phối log-normal">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Phân phối log-normal</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./distr-pl.html" class="pagination-link" aria-label="Phân phối quy tắc lũy thừa">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Phân phối quy tắc lũy thừa</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>